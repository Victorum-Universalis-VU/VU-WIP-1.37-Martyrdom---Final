#vu_jews_agendas by Quonton
#Triggers: any province has the basic conditions, country has adm tech 4
estate_jews_build_temple_in_y = {
	can_select = {
		adm_tech = 21
		any_owned_province = {
			is_state_core = root
			NOT = { has_building = grand_cathedral }
			OR = {
				AND = {
					NOT = { has_building = temple }
					NOT = { has_building = cathedral }
					num_free_building_slots = 1
				}
				AND = {
				    ROOT = { adm_tech = 36 }
					NOT = { has_building = cathedral }
					OR = {
						num_free_building_slots = 1
						has_building = temple
					}
				}
				AND = {
					ROOT = { adm_tech = 46 }
					OR = {
						num_free_building_slots = 1
						has_building = cathedral
					}
				}
			}
		}
	}
	selection_weight = {
		factor = 1
		modifier = {
			factor = 0.65
			NOT = {
				any_owned_province = {
					is_state_core = root
					base_tax = 4
					NOT = { has_building = grand_cathedral }
					OR = {
						AND = {
				        	NOT = { has_building = temple }
				        	NOT = { has_building = cathedral }
				        	num_free_building_slots = 1
				        }
				        AND = {
				            ROOT = { adm_tech = 36 }
				        	NOT = { has_building = cathedral }
				        	OR = {
				        		num_free_building_slots = 1
				        		has_building = temple
				        	}
				        }
				        AND = {
				        	ROOT = { adm_tech = 46 }
				        	OR = {
				        		num_free_building_slots = 1
				        		has_building = cathedral
				        	}
				        }
					}
				}
			}
		}
		modifier = {
			factor = 1.2
			any_owned_province = {
				is_state_core = root
				base_tax = 7
				NOT = { has_building = grand_cathedral }
				OR = {
					AND = {
				    	NOT = { has_building = temple }
				    	NOT = { has_building = cathedral }
				    	num_free_building_slots = 1
				    }
				    AND = {
				        ROOT = { adm_tech = 36 }
				    	NOT = { has_building = cathedral }
				    	OR = {
				    		num_free_building_slots = 1
				    		has_building = temple
				    	}
				    }
				    AND = {
				    	ROOT = { adm_tech = 46 }
				    	OR = {
				    		num_free_building_slots = 1
				    		has_building = cathedral
				    	}
				    }
				}
			}
		}
		modifier = {
			factor = 2
			NOT = {
				crown_land_share = 15
			}
		}
	}
	pre_effect = {
		set_variable = {
			which = estate_jews_build_temple_in_y_var
			value = 0
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				NOT = { has_building = grand_cathedral }
				OR = {
					AND = {
				    	NOT = { has_building = temple }
				    	NOT = { has_building = cathedral }
				    	num_free_building_slots = 1
				    }
				    AND = {
				        ROOT = { adm_tech = 36 }
				    	NOT = { has_building = cathedral }
				    	OR = {
				    		num_free_building_slots = 1
				    		has_building = temple
				    	}
				    }
				    AND = {
				    	ROOT = { adm_tech = 46 }
				    	OR = {
				    		num_free_building_slots = 1
				    		has_building = cathedral
				    	}
				    }
				}
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				base_tax = 4
				NOT = { has_building = grand_cathedral }
				OR = {
					AND = {
				    	NOT = { has_building = temple }
				    	NOT = { has_building = cathedral }
				    	num_free_building_slots = 1
				    }
				    AND = {
				        ROOT = { adm_tech = 36 }
				    	NOT = { has_building = cathedral }
				    	OR = {
				    		num_free_building_slots = 1
				    		has_building = temple
				    	}
				    }
				    AND = {
				    	ROOT = { adm_tech = 46 }
				    	OR = {
				    		num_free_building_slots = 1
				    		has_building = cathedral
				    	}
				    }
				}
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				base_tax = 7
				NOT = { has_building = grand_cathedral }
				OR = {
					AND = {
				    	NOT = { has_building = temple }
				    	NOT = { has_building = cathedral }
				    	num_free_building_slots = 1
				    }
				    AND = {
				        ROOT = { adm_tech = 36 }
				    	NOT = { has_building = cathedral }
				    	OR = {
				    		num_free_building_slots = 1
				    		has_building = temple
				    	}
				    }
				    AND = {
				    	ROOT = { adm_tech = 46 }
				    	OR = {
				    		num_free_building_slots = 1
				    		has_building = cathedral
				    	}
				    }
				}
			}
			save_event_target_as = agenda_province
		}
		event_target:agenda_province = {
			if = {
				limit = {
					NOT = { has_building = temple }
				}
				ROOT = {
					set_variable = {
						which = estate_jews_build_temple_in_y_var
						value = 1
					}
				}
			}
			else_if = {
				limit = {
					NOT = { has_building = cathedral }
				}
				ROOT = {
					set_variable = {
						which = estate_jews_build_temple_in_y_var
						value = 2
					}
				}
			}
			else = {
				ROOT = {
					set_variable = {
						which = estate_jews_build_temple_in_y_var
						value = 3
					}
				}
			}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		if = {
			limit = {
				has_estate_agenda_auto_completion = {
					estate = estate_jews
				}
			}
			has_estate_agenda_auto_completion = {
				estate = estate_jews
			}
		}
		else = {
			if = {
				limit = {
					check_variable = {
						which = estate_jews_build_temple_in_y_var
						value = 3
					}
				}
				event_target:agenda_province = {
					has_building = grand_cathedral
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = estate_jews_build_temple_in_y_var
						value = 2
					}
				}
		
		event_target:agenda_province = {
				    OR = {
						has_building = cathedral
						has_building = grand_cathedral
					}
				}
			}
			else = {
				event_target:agenda_province = {
					OR = {
						has_building = temple
						has_building = cathedral
						has_building = grand_cathedral
					}
				}
			}
		}
    }
    task_completed_effect = {
		on_completed_agenda_effect = {
			estate = estate_jews
		}
		add_estate_loyalty = {
			estate = estate_jews
			loyalty = 10
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_jews
					territory = 10
				}
				estate_not_has_exempt_from_seize_land_privilege = { estate = estate_jews }
			}
			take_estate_land_share_small = { estate = estate_jews }
		}
		else = {
			event_target:agenda_province = {
				add_base_tax = 1
			}
		}
    }
    failing_effect = {
		on_failed_agenda_effect = yes
		clr_auto_complete_flag = yes
		event_target:agenda_province = {
			if = {
				limit = { owned_by = root }
				add_named_unrest = {
					name = local_jews_displeased
					value = 5
				}
			}
		}
		add_estate_loyalty_modifier = {
			estate = estate_jews
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
		}
    }
}

estate_jews_build_trade_building_in_y = {
	can_select = {
		dip_tech = 21
		any_owned_province = {
			is_state_core = root
			NOT = { has_building = corporative_headquarters }
			OR = {
				AND = {
					NOT = { has_building = marketplace }
					NOT = { has_building = trade_depot }
					NOT = { has_building = stock_exchange }
					num_free_building_slots = 1
				}
				AND = {
					ROOT = { dip_tech = 34 }
					NOT = { has_building = trade_depot }
					OR = {
						num_free_building_slots = 1
						has_building = marketplace
					}
				}
				AND = {
					ROOT = { dip_tech = 39 }
					NOT = { has_building = stock_exchange }
					OR = {
						num_free_building_slots = 1
						has_building = trade_depot
					}
				}
				AND = {
					ROOT = { dip_tech = 49 }
					OR = {
						num_free_building_slots = 1
						has_building = stock_exchange
					}
				}
			}
		}
	}
	selection_weight = {
		factor = 1
		modifier = {
			factor = 0.65
			NOT = {
				any_owned_province = {
					is_state_core = root
					OR = {
						province_has_center_of_trade_of_level = 1
						province_trade_power = 10
					}
					NOT = { has_building = corporative_headquarters }
					OR = {
						AND = {
							NOT = { has_building = marketplace }
							NOT = { has_building = trade_depot }
							NOT = { has_building = stock_exchange }
							num_free_building_slots = 1
						}
						AND = {
							ROOT = { dip_tech = 34 }
							NOT = { has_building = trade_depot }
							OR = {
								num_free_building_slots = 1
								has_building = marketplace
							}
						}
						AND = {
						    ROOT = { dip_tech = 39 }
							NOT = { has_building = stock_exchange }
					        OR = {
						        num_free_building_slots = 1
						        has_building = trade_depot
					        }
				        }
						AND = {
							ROOT = { dip_tech = 49 }
							OR = {
								num_free_building_slots = 1
								has_building = stock_exchange
							}
						}
					}
				}
			}
		}
		modifier = {
			factor = 1.2
			any_owned_province = {
				is_state_core = root
				OR = {
					province_has_center_of_trade_of_level = 2
					province_trade_power = 20
				}
				NOT = { has_building = corporative_headquarters }
				OR = {
					AND = {
						NOT = { has_building = marketplace }
						NOT = { has_building = trade_depot }
						NOT = { has_building = stock_exchange }
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { dip_tech = 34 }
						NOT = { has_building = trade_depot }
						OR = {
							num_free_building_slots = 1
							has_building = marketplace
						}
					}
					AND = {
					    ROOT = { dip_tech = 39 }
						NOT = { has_building = stock_exchange }
					    OR = {
					        num_free_building_slots = 1
					        has_building = trade_depot
						}
				    }
					AND = {
						ROOT = { dip_tech = 49 }
						OR = {
							num_free_building_slots = 1
							has_building = stock_exchange
						}
					}
				}
			}
		}
		modifier = {
			factor = 2
			is_institution_enabled = global_trade
			NOT = { has_institution = global_trade }
		}
		modifier = {
			factor = 2
			NOT = {
				crown_land_share = 15
			}
		}
	}
	pre_effect = {
		set_variable = {
			which = estate_jews_build_trade_building_in_y_var
			value = 0
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				NOT = { has_building = corporative_headquarters }
				OR = {
					AND = {
						NOT = { has_building = marketplace }
						NOT = { has_building = trade_depot }
						NOT = { has_building = stock_exchange }
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { dip_tech = 34 }
						NOT = { has_building = trade_depot }
						OR = {
							num_free_building_slots = 1
							has_building = marketplace
						}
					}
					AND = {
					    ROOT = { dip_tech = 39 }
						NOT = { has_building = stock_exchange }
					    OR = {
					        num_free_building_slots = 1
					        has_building = trade_depot
						}
				    }
					AND = {
						ROOT = { dip_tech = 49 }
						OR = {
							num_free_building_slots = 1
							has_building = stock_exchange
						}
					}
				}
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				OR = {
					province_has_center_of_trade_of_level = 1
					province_trade_power = 10
				}
				NOT = { has_building = corporative_headquarters }
				OR = {
					AND = {
						NOT = { has_building = marketplace }
						NOT = { has_building = trade_depot }
						NOT = { has_building = stock_exchange }
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { dip_tech = 34 }
						NOT = { has_building = trade_depot }
						OR = {
							num_free_building_slots = 1
							has_building = marketplace
						}
					}
					AND = {
					    ROOT = { dip_tech = 39 }
						NOT = { has_building = stock_exchange }
					    OR = {
					        num_free_building_slots = 1
					        has_building = trade_depot
						}
				    }
					AND = {
						ROOT = { dip_tech = 49 }
						OR = {
							num_free_building_slots = 1
							has_building = stock_exchange
						}
					}
				}
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				OR = {
					province_has_center_of_trade_of_level = 2
					province_trade_power = 20
				}
				NOT = { has_building = corporative_headquarters }
				OR = {
					AND = {
						NOT = { has_building = marketplace }
						NOT = { has_building = trade_depot }
						NOT = { has_building = stock_exchange }
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { dip_tech = 34 }
						NOT = { has_building = trade_depot }
						OR = {
							num_free_building_slots = 1
							has_building = marketplace
						}
					}
					AND = {
					    ROOT = { dip_tech = 39 }
						NOT = { has_building = stock_exchange }
					    OR = {
					        num_free_building_slots = 1
					        has_building = trade_depot
						}
				    }
					AND = {
						ROOT = { dip_tech = 49 }
						OR = {
							num_free_building_slots = 1
							has_building = stock_exchange
						}
					}
				}
			}
			save_event_target_as = agenda_province
		}
		event_target:agenda_province = {
			if = {
				limit = {
					has_building = stock_exchange
				}
				ROOT = {
					set_variable = {
						which = estate_jews_build_trade_building_in_y_var
						value = 4
					}
				}
			}
			else_if = {
				limit = {
					has_building = trade_depot
				}
				ROOT = {
					set_variable = {
						which = estate_jews_build_trade_building_in_y_var
						value = 3
					}
				}
			}
			else_if = {
				limit = {
					has_building = marketplace
				}
				ROOT = {
					set_variable = {
						which = estate_jews_build_trade_building_in_y_var
						value = 2
					}
				}
			}
			else = {
				ROOT = {
					set_variable = {
						which = estate_jews_build_trade_building_in_y_var
						value = 1
					}
				}
			}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		if = {
			limit = {
				has_estate_agenda_auto_completion = {
					estate = estate_jews
				}
			}
			has_estate_agenda_auto_completion = {
				estate = estate_jews
			}
		}
		else = {
			if = {
				limit = {
					check_variable = {
						which = estate_jews_build_trade_building_in_y_var
						value = 4
					}
				}
				event_target:agenda_province = {
					has_building = corporative_headquarters
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = estate_jews_build_trade_building_in_y_var
						value = 3
					}
				}
				event_target:agenda_province = {
				    OR = {
						has_building = stock_exchange
						has_building = corporative_headquarters
					}
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = estate_jews_build_trade_building_in_y_var
						value = 2
					}
				}
				event_target:agenda_province = {
					OR = {
						has_building = trade_depot
						has_building = stock_exchange
						has_building = corporative_headquarters
					}
				}
			}
			else = {
				event_target:agenda_province = {
					OR = {
						has_building = marketplace
						has_building = trade_depot
						has_building = stock_exchange
						has_building = corporative_headquarters
					}
				}
			}
		}
    }
    task_completed_effect = {
		on_completed_agenda_effect = {
			estate = estate_jews
		}
		add_estate_loyalty = {
			estate = estate_jews
			loyalty = 10
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_jews
					territory = 10
				}
				estate_not_has_exempt_from_seize_land_privilege = { estate = estate_jews }
			}
			take_estate_land_share_small = { estate = estate_jews }
		}
		else = {
			event_target:agenda_province = {
				add_base_production = 1
			}
		}
    }
    failing_effect = {
		on_failed_agenda_effect = yes
		clr_auto_complete_flag = yes
		event_target:agenda_province = {
			if = {
				limit = { owned_by = root }
				add_named_unrest = {
					name = local_jews_displeased
					value = 5
				}
			}
		}
        add_estate_loyalty_modifier = {
            estate = estate_jews
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }
    }
}

estate_jews_build_production_building_in_y = {
	can_select = {
		adm_tech = 23
		any_owned_province = {
			is_state_core = root
			NOT = { has_building = factory }
			OR = {
				AND = {
					NOT = { has_building = workshop }
					NOT = { has_building = counting_house }
					NOT = { has_building = treasury }
					num_free_building_slots = 1
				}
				AND = {
					ROOT = { adm_tech = 29 }
					NOT = { has_building = counting_house }
					OR = {
						num_free_building_slots = 1
						has_building = workshop
					}
				} 
				AND = {
					ROOT = { adm_tech = 41 }
					NOT = { has_building = treasury }
					OR = {
						num_free_building_slots = 1
						has_building = counting_house
					}
				}
				AND = {
					ROOT = { adm_tech = 49 }
					OR = {
						num_free_building_slots = 1
						has_building = treasury
					}
				}
			}
			NOT = { trade_goods = gold }
			NOT = { trade_goods = silver }
		}
	}
	selection_weight = {
		factor = 1
		modifier = {
			factor = 0.65
			NOT = {
				any_owned_province = {
					is_state_core = root
					base_production = 4
					NOT = { has_building = factory }
					OR = {
						AND = {
						    NOT = { has_building = workshop }
						    NOT = { has_building = counting_house }
						    NOT = { has_building = treasury }
						    num_free_building_slots = 1
						}
				        AND = {
				        	ROOT = { adm_tech = 29 }
				        	NOT = { has_building = counting_house }
				        	OR = {
				        		num_free_building_slots = 1
				        		has_building = workshop
				        	}
				        } 
				        AND = {
				        	ROOT = { adm_tech = 41 }
				        	NOT = { has_building = treasury }
				        	OR = {
				        		num_free_building_slots = 1
				        		has_building = counting_house
				        	}
				        }
				        AND = {
				        	ROOT = { adm_tech = 49 }
				        	OR = {
				        		num_free_building_slots = 1
				        		has_building = treasury
				        	}
				        }
					}
					NOT = { trade_goods = gold }
					NOT = { trade_goods = silver }
				}
			}
		}
		modifier = {
			factor = 1.2
			any_owned_province = {
				is_state_core = root
				OR = {
					base_production = 7
					has_building = wharf
					has_building = weapons
					has_building = textile
					has_building = tradecompany
					has_building = farm_estate
					has_building = mills
					has_building = plantations
					has_building = furnace
				}
				NOT = { has_building = factory }
				OR = {
					AND = {
						NOT = { has_building = workshop }
						NOT = { has_building = counting_house }
						NOT = { has_building = treasury }
						num_free_building_slots = 1
					}
				    AND = {
				    	ROOT = { adm_tech = 29 }
				    	NOT = { has_building = counting_house }
				    	OR = {
				    		num_free_building_slots = 1
				    		has_building = workshop
				    	}
				    } 
				    AND = {
				    	ROOT = { adm_tech = 41 }
				    	NOT = { has_building = treasury }
				    	OR = {
				    		num_free_building_slots = 1
				    		has_building = counting_house
				    	}
				    }
				    AND = {
				    	ROOT = { adm_tech = 49 }
				    	OR = {
				    		num_free_building_slots = 1
				    		has_building = treasury
				    	}
				    }
				}
				NOT = { trade_goods = gold }
				NOT = { trade_goods = silver }
			}
		}
		modifier = {
			factor = 2
			NOT = {
				crown_land_share = 15
			}
		}
	}
	pre_effect = {
		set_variable = {
			which = estate_jews_build_production_building_in_y_var
			value = 0
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				NOT = { has_building = factory }
				OR = {
					AND = {
						NOT = { has_building = workshop }
						NOT = { has_building = counting_house }
						NOT = { has_building = treasury }
						num_free_building_slots = 1
					}
				    AND = {
				    	ROOT = { adm_tech = 29 }
				    	NOT = { has_building = counting_house }
				    	OR = {
				    		num_free_building_slots = 1
				    		has_building = workshop
				    	}
				    } 
				    AND = {
				    	ROOT = { adm_tech = 41 }
				    	NOT = { has_building = treasury }
				    	OR = {
				    		num_free_building_slots = 1
				    		has_building = counting_house
				    	}
				    }
				    AND = {
				    	ROOT = { adm_tech = 49 }
				    	OR = {
				    		num_free_building_slots = 1
				    		has_building = treasury
				    	}
				    }
				}
				NOT = { trade_goods = gold }
				NOT = { trade_goods = silver }
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				base_production = 4
				NOT = { has_building = factory }
				OR = {
					AND = {
						NOT = { has_building = workshop }
						NOT = { has_building = counting_house }
						NOT = { has_building = treasury }
						num_free_building_slots = 1
					}
				    AND = {
				    	ROOT = { adm_tech = 29 }
				    	NOT = { has_building = counting_house }
				    	OR = {
				    		num_free_building_slots = 1
				    		has_building = workshop
				    	}
				    } 
				    AND = {
				    	ROOT = { adm_tech = 41 }
				    	NOT = { has_building = treasury }
				    	OR = {
				    		num_free_building_slots = 1
				    		has_building = counting_house
				    	}
				    }
				    AND = {
				    	ROOT = { adm_tech = 49 }
				    	OR = {
				    		num_free_building_slots = 1
				    		has_building = treasury
				    	}
				    }
				}
				NOT = { trade_goods = gold }
				NOT = { trade_goods = silver }
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				OR = {
					base_production = 7
					has_building = wharf
					has_building = weapons
					has_building = textile
					has_building = tradecompany
					has_building = farm_estate
					has_building = mills
					has_building = plantations
					has_building = furnace
				}
				NOT = { has_building = factory }
				OR = {
					AND = {
						NOT = { has_building = workshop }
						NOT = { has_building = counting_house }
						NOT = { has_building = treasury }
						num_free_building_slots = 1
					}
				    AND = {
				    	ROOT = { adm_tech = 29 }
				    	NOT = { has_building = counting_house }
				    	OR = {
				    		num_free_building_slots = 1
				    		has_building = workshop
				    	}
				    } 
				    AND = {
				    	ROOT = { adm_tech = 41 }
				    	NOT = { has_building = treasury }
				    	OR = {
				    		num_free_building_slots = 1
				    		has_building = counting_house
				    	}
				    }
				    AND = {
				    	ROOT = { adm_tech = 49 }
				    	OR = {
				    		num_free_building_slots = 1
				    		has_building = treasury
				    	}
				    }
				}
				NOT = { trade_goods = gold }
				NOT = { trade_goods = silver }
			}
			save_event_target_as = agenda_province
		}
		event_target:agenda_province = {
			if = {
				limit = {
					has_building = treasury
				}
				ROOT = {
					set_variable = {
						which = estate_jews_build_production_building_in_y_var
						value = 4
					}
				}
			}
			else_if = {
				limit = {
					has_building = counting_house
				}
				ROOT = {
					set_variable = {
						which = estate_jews_build_production_building_in_y_var
						value = 3
					}
				}
			}
			else_if = {
				limit = {
					has_building = workshop
				}
				ROOT = {
					set_variable = {
						which = estate_jews_build_production_building_in_y_var
						value = 2
					}
				}
			}
			else = {
				ROOT = {
					set_variable = {
						which = estate_jews_build_production_building_in_y_var
						value = 1
					}
				}
			}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
	task_requirements = {
		if = {
			limit = {
				has_estate_agenda_auto_completion = {
					estate = estate_jews
				}
			}
			has_estate_agenda_auto_completion = {
				estate = estate_jews
			}
		}
		else = {
			if = {
				limit = {
					check_variable = {
						which = estate_jews_build_production_building_in_y_var
						value = 4
					}
				}
				event_target:agenda_province = {
					has_building = factory
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = estate_jews_build_production_building_in_y_var
						value = 3
					}
				}
				event_target:agenda_province = {
				    OR = {
						has_building = treasury
						has_building = factory
					}
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = estate_jews_build_production_building_in_y_var
						value = 2
					}
				}
				event_target:agenda_province = {
					OR = {
						has_building = counting_house
						has_building = treasury
						has_building = factory
					}
				}
			}
			else = {
				event_target:agenda_province = {
					OR = {
						has_building = workshop
						has_building = counting_house
						has_building = treasury
						has_building = factory
					}
				}
			}
		}
    }
    task_completed_effect = {
		on_completed_agenda_effect = {
			estate = estate_jews
		}
		add_estate_loyalty = {
			estate = estate_jews
			loyalty = 10
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_jews
					territory = 10
				}
				estate_not_has_exempt_from_seize_land_privilege = { estate = estate_jews }
			}
			take_estate_land_share_small = { estate = estate_jews }
		}
		else = {
			event_target:agenda_province = {
				add_base_production = 1
			}
		}
    }
    failing_effect = {
		on_failed_agenda_effect = yes
		clr_auto_complete_flag = yes
		event_target:agenda_province = {
			if = {
				limit = { owned_by = root }
				add_named_unrest = {
					name = local_jews_displeased
					value = 5
				}
			}
		}
        add_estate_loyalty_modifier = {
            estate = estate_jews
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }
    }
}

#should be 2x as likely
estate_jews_build_manufactory_in_y = {
	can_select = {
		any_owned_province = {
			is_state_core = root
			root_can_build_manufactory_here_trigger = yes
			has_burghers_trade_good_trigger = yes
		}
		monthly_income = 30
	}
	selection_weight = {
		factor = 2
		modifier = {
			factor = 0.5
			OR = {
				current_age = age_of_discovery
				current_age = age_of_reformation
			}
		}
		modifier = {
			factor = 0.5
			NOT = { monthly_income = 40 }
		}
		modifier = {
			factor = 2
			monthly_income = 60
		}
		modifier = {
			factor = 2
			is_institution_enabled = manufactories
			NOT = { has_institution = manufactories }
		}
	}
	pre_effect = {
		random_owned_province = {
			limit = {
				is_state_core = root
				root_can_build_manufactory_here_trigger = yes
				has_burghers_trade_good_trigger = yes
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				base_production = 5
				root_can_build_manufactory_here_trigger = yes
				has_burghers_trade_good_trigger = yes
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				base_production = 10
				root_can_build_manufactory_here_trigger = yes
				has_burghers_trade_good_trigger = yes
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		if = {
			limit = {
				has_estate_agenda_auto_completion = {
					estate = estate_jews
				}
			}
			has_estate_agenda_auto_completion = {
				estate = estate_jews
			}
		}
		else = {
			event_target:agenda_province = {
				custom_trigger_tooltip = {
					tooltip = has_manufactory_trigger_tooltip
					OR = {
						if = {
							limit = {
								OR = {
									trade_goods = naval_supplies
									trade_goods = fish
									trade_goods = salt
								}
							}
							has_building = wharf
						}
						else_if = {
							limit = {
								OR = {
									trade_goods = copper
									trade_goods = iron
								}
							}
							has_building = weapons
						}
						else_if = {
							limit = {
								OR = {
									trade_goods = wool
									trade_goods = cloth
									trade_goods = silk
									trade_goods = dyes
								}
							}
							has_building = textile
						}
						else_if = {
							limit = {
								OR = {
									trade_goods = ivory
									trade_goods = slaves
									trade_goods = spices
									trade_goods = cloves
									trade_goods = fur
									trade_goods = incense
								}
							}
							has_building = tradecompany
						}
						else_if = {
							limit = {
								OR = {
									trade_goods = grain
									trade_goods = livestock
									trade_goods = wine
									trade_goods = fruit
									trade_goods = beer
									trade_goods = cider
								}
							}
							has_building = farm_estate
						}
						else_if = {
							limit = {
								OR = {
									trade_goods = paper
									trade_goods = gems
									trade_goods = tropical_wood
									trade_goods = glass
									trade_goods = chinaware
									trade_goods = diamonds
								}
							}
							has_building = mills
						}
						else_if = {
							limit = {
								trade_goods = coal
							}
							has_building = furnace
						}
						else = {
							has_building = plantations
						}
						has_building = ramparts
						has_building = soldier_households
						has_building = impressment_offices
						has_building = state_house
						has_building = furnace
					}
				}
			}
		}
    }
    task_completed_effect = {
		on_completed_agenda_effect = {
			estate = estate_jews
		}
		add_estate_loyalty = {
			estate = estate_jews
			loyalty = 10
		}
		event_target:agenda_province = {
			add_base_production = 1
			add_province_modifier = {
				name = prospering_production
				duration = 5475
			}
		}
    }
    failing_effect = {
		on_failed_agenda_effect = yes
		clr_auto_complete_flag = yes
		event_target:agenda_province = {
			if = {
				limit = { owned_by = root }
				add_named_unrest = {
					name = local_jews_displeased
					value = 5
				}
			}
		}
        add_estate_loyalty_modifier = {
            estate = estate_jews
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }
    }
}

#Universities

estate_jews_build_university_in_y = {
	can_select = {
		adm_tech = 34
		any_owned_province = {
			is_state_core = root
			NOT = { has_building = university }
			OR = {
				development = 10
				is_capital = yes
			}
		}
	}
	selection_weight = {
		factor = 1
		modifier = {
			factor = 0.75
			NOT = {
				any_owned_province = {
					is_state_core = root
					NOT = { has_building = university }
					development = 15
				}
			}
		}
		modifier = {
			factor = 1.2
			any_owned_province = {
				is_state_core = root
				NOT = { has_building = university }
				development = 20
			}
		}
		modifier = {
			factor = 2
			is_institution_enabled = enlightenment
			NOT = { has_institution = enlightenment }
		}
	}
	pre_effect = {
		random_owned_province = {
			limit = {
				is_state_core = root
				NOT = { has_building = university }
				development = 10
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				NOT = { has_building = university }
				development = 15
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				NOT = { has_building = university }
				development = 20
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				NOT = { has_building = university }
				is_capital = yes
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		if = {
			limit = {
				has_estate_agenda_auto_completion = {
					estate = estate_jews
				}
			}
			has_estate_agenda_auto_completion = {
				estate = estate_jews
			}
		}
		else = {
			event_target:agenda_province = {
				has_building = university
			}
		}
    }
    task_completed_effect = {
		on_completed_agenda_effect = {
			estate = estate_jews
		}
		add_estate_loyalty = {
			estate = estate_jews
			loyalty = 10
		}
		add_adm_power = 35
		add_dip_power = 35
		add_mil_power = 35
    }
    failing_effect = {
		on_failed_agenda_effect = yes
		clr_auto_complete_flag = yes
		event_target:agenda_province = {
			if = {
				limit = { owned_by = root }
				add_named_unrest = {
					name = local_jews_displeased
					value = 5
				}
			}
		}
        add_estate_loyalty_modifier = {
            estate = estate_jews
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }
    }
}

#### Develop the province

estate_jews_develop_x = {
	selection_weight = {
		factor = 1
	}
	can_select = {
		capital_scope = {
			is_state_core = root
		}
	}
	pre_effect = {
		random_list = {
			1 = {
				random_owned_province = {
					limit = {
						is_state_core = root
						area_for_scope_province = {
							is_capital_of = root
						}
					}
					save_event_target_as = agenda_province
				}
			}
			2 = {
				trigger = {
					any_owned_province = {
						is_state_core = root
						OR = {
							AND = {
								religion = root
								OR = {
									culture = root
									has_owner_accepted_culture = yes
								}
							}
						}
						region_for_scope_province = {
							is_capital_of = root
						}
					}
				}
				random_owned_province = {
					limit = {
						is_state_core = root
						OR = {
							AND = {
								religion = root
								OR = {
									culture = root
									has_owner_accepted_culture = yes
								}
							}
						}
						region_for_scope_province = {
							is_capital_of = root
						}
					}
					save_event_target_as = agenda_province
				}
			}
			1 = {
				random_owned_province = {
					limit = {
						is_state_core = root
					}
					save_event_target_as = agenda_province
				}
			}
		}
		event_target:agenda_province = {
			if = {
				limit = {
					check_variable = {
						which = province_dip_var
						value = 1
					}
				}
				set_variable = {
					which = province_dip_var
					value = 0
				}
			}
			export_to_variable = {
				which = province_dip_var
				value = trigger_value:base_production
			}
			change_variable = {
				which = province_dip_var
				value = 2
			}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		if = {
			limit = {
				has_estate_agenda_auto_completion = {
					estate = estate_jews
				}
			}
			has_estate_agenda_auto_completion = {
				estate = estate_jews
			}
		}
		else = {
			event_target:agenda_province = {
				base_production = "province_dip_var"
			}
		}
    }
    task_completed_effect = {
		on_completed_agenda_effect = {
			estate = estate_jews
		}
		add_estate_loyalty = {
			estate = estate_jews
			loyalty = 10
		}
		add_years_of_income = 0.3
    }
    failing_effect = {
		on_failed_agenda_effect = yes
		clr_auto_complete_flag = yes
		event_target:agenda_province = {
			if = {
				limit = { owned_by = root }
				add_named_unrest = {
					name = local_jews_displeased
					value = 5
				}
			}
		}
        add_estate_loyalty_modifier = {
            estate = estate_jews
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }
    }
}


estate_jews_increase_privileges = {
	selection_weight = {
		factor = 1
	}
	can_select = {
		NOT = {
			has_estate_privilege = estate_jews_land_privileges 
		}
	}
	pre_effect = {
	}
	provinces_to_highlight = {
	}
	fail_if = {
	}
    task_requirements = {
		has_estate_privilege = estate_jews_land_privileges 
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_jews
			loyalty = 15
		}
    }
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_jews
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

#GE_peasant_agendas
#(Nearly) all scopes are country scope
#All parameters are optional (but it will not be much of an agenda without some of them...)

# estate_agenda = {
# 	max_days_active = 100 						#Lets you override the default of 20 years for an agenda
# 	can_select = { triggers } 					#Conditions for whether the agenda can be offered to you
# 	provinces_to_highlight = { triggers }		#Conditions for provinces to be highlighted by the agenda. Root = country, this = province.
# 	selection_weight = {						#Determines how likely (compared to the estate's other agendas) this agenda is to be selected.
# 		factor = 1.0 									#initial factor will ignore numbers below 1, use a modifier for that!
# 		modifier = { factor = 10 triggers = yes }
# 	}
# 	pre_effect = { effects }					#Effects executed to set up the task (set flags and targets), before it is shown to the player.
# 	immediate_effect = { effects } 				#Effects executed when the agenda is accepted by the country
# 	task_requirements = { triggers } 			#Conditions for completing the task successfully
# 	task_completed_effect = { effects } 		#Effects executed when the agenda is successfully completed
# 	failing_effect = { effects } 				#Effects executed when the agenda is failed (i.e. when fail_if is true or time runs out)
# 	fail_if = { triggers } 						#Conditions for when the agenda should be auto-failed
# 	on_invalid = { effects } 					#Effects executed when the country no longer has that estate or the invalid_trigger is true. Useful for clearing flags, modifiers etc.
# 	invalid_trigger = { triggers } 				#Conditions for when the agenda should end without it counting as a fail (executing on_invalid rather than failing_effect). Happens by default it the estate giving the agenda is removed.
# 	modifier = { modifier } 					#Country modifier granted while the agenda is active
# }


estate_peasants_develop_grain = {
	selection_weight = {
		factor = 1
	}
	can_select = {
		any_owned_province = {
			is_state_core = root
			trade_goods = grain
		}
	}
	pre_effect = {
		random_owned_province = {
			limit = {
				is_state_core = root
				trade_goods = grain
			}
			save_event_target_as = agenda_province
		}
		event_target:agenda_province = {
			if = {
				limit = {
					check_variable = {
						which = province_dip_var
						value = 1
					}
				}
				set_variable = {
					which = province_dip_var
					value = 0
				}
			}
			export_to_variable = {
				which = province_dip_var
				value = trigger_value:base_production
			}
			change_variable = {
				which = province_dip_var
				value = 2
			}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			base_production = "province_dip_var"
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_peasants
			loyalty = 10
		}
		event_target:agenda_province = {
			add_province_modifier = {
				name = "GE_Peasant_Estate_Growth"
				duration = 3650
			}
		}
    }
    failing_effect = {
		event_target:agenda_province = {
			if = {
				limit = { owned_by = root }
				add_named_unrest = {
					name = local_clergy_displeased
					value = 5
				}
			}
		}
        add_estate_loyalty_modifier = {
            estate = estate_peasants
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }
    }
}

estate_peasants_herd_cattle = {
	selection_weight = {
		factor = 1
	}
	can_select = {
		any_owned_province = {
			is_state_core = root
			trade_goods = livestock
		}
	}
	pre_effect = {
		random_owned_province = {
			limit = {
				is_state_core = root
				trade_goods = livestock
			}
			save_event_target_as = agenda_province
		}
		event_target:agenda_province = {
			if = {
				limit = {
					check_variable = {
						which = province_dip_var
						value = 1
					}
				}
				set_variable = {
					which = province_dip_var
					value = 0
				}
			}
			export_to_variable = {
				which = province_dip_var
				value = trigger_value:base_production
			}
			change_variable = {
				which = province_dip_var
				value = 1
			}
			if = {
				limit = {
					check_variable = {
						which = province_adm_var
						value = 1
					}
				}
				set_variable = {
					which = province_adm_var
					value = 0
				}
			}
			export_to_variable = {
				which = province_adm_var
				value = trigger_value:base_tax
			}
			change_variable = {
				which = province_adm_var
				value = 1
			}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			base_production = "province_dip_var"
			base_tax = "province_adm_var"
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_peasants
			loyalty = 10
		}
		event_target:agenda_province = {
			add_base_manpower = 1
			add_province_modifier = {
				name = "GE_Peasant_Estate_Cattle"
				duration = 3650
			}
		}
    }
    failing_effect = {
		event_target:agenda_province = {
			if = {
				limit = { owned_by = root }
				add_named_unrest = {
					name = local_clergy_displeased
					value = 5
				}
			}
		}
        add_estate_loyalty_modifier = {
            estate = estate_peasants
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }
    }
}

estate_peasants_build_wood_workshop = {
	selection_weight = {
		factor = 1
	}
	can_select = {
		adm_tech = 23
		any_owned_province = {
			is_state_core = root
			NOT = { has_building = workshop }
			NOT = { has_building = counting_house }
		}
	}
	pre_effect = {
		random_owned_province = {
			limit = {
				is_state_core = root
				NOT = { has_building = workshop }
				NOT = { has_building = counting_house }
			}
			save_event_target_as = agenda_province
		}
		event_target:agenda_province = {
			add_province_modifier = {
				name = "GE_Peasant_Estate_Construct_Workshop"
				duration = 3650
			}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			has_building = workshop
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_peasants
			loyalty = 10
		}
		add_years_of_income = 0.2
    }
    failing_effect = {
		event_target:agenda_province = {
			if = {
				limit = { owned_by = root }
				add_named_unrest = {
					name = local_clergy_displeased
					value = 5
				}
			}
		}
        add_estate_loyalty_modifier = {
            estate = estate_peasants
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }
    }
}

estate_peasants_harvest_time = {
	selection_weight = {
		factor = 1
		modifier = {
			factor = 2
			war_exhaustion = 1
		}
		modifier = {
			factor = 5
			war_exhaustion = 5
		}
		modifier = {
			factor = 10
			war_exhaustion = 10
		}
	}
	can_select = {
		is_at_war = yes
	}
	pre_effect = {
	}
	provinces_to_highlight = {
	}
	fail_if = {
	}
    task_requirements = {
		custom_trigger_tooltip = {
			tooltip = estate_peasants_harvest_time_tooltip
			NOT = { had_recent_war = 5 }
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_peasants
			loyalty = 5
		}
		add_country_modifier = {
			name = GE_Peasant_Estate_Peace
			duration = 3650
		}
    }
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_peasants
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }
    }
}

estate_peasants_increase_privileges = {
	selection_weight = {
		factor = 1
	}
	can_select = {
		NOT = {
			has_estate_privilege = estate_peasants_land_rights
		}
	}
	pre_effect = {
	}
	provinces_to_highlight = {
	}
	fail_if = {
	}
    task_requirements = {
		has_estate_privilege = estate_peasants_land_rights
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_peasants
			loyalty = 15
		}
		add_country_modifier = {
			name = GE_Peasant_Estate_Fervor
			duration = 3650
		}
    }
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_peasants
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -10
			duration = 7300
        }
    }
}

estate_peasants_expand_lebensraum = {
	can_select = {
		is_free_or_tributary_trigger = yes
		is_at_war = no
		any_neighbor_country = {
			NOT = { is_subject_of = root }
			NOT = { overlord_of = root }
			NOT = { alliance_with = root }
			NOT = { ROOT = { truce_with = prev } }
			NOT = { 
				has_opinion = {
					who = root
					value = 50
				}
			}
			ROOT = {
				knows_country = prev
			}
			any_owned_province = {
				any_neighbor_province = {
					owned_by = root
				}
				NOT = {
					OR = {
						is_empty = yes
						owned_by = root
					}
				}
				OR = {
					trade_goods = livestock
					trade_goods = grain
				}
			}
			OR = {
				is_part_of_hre = no
				NOT = { hre_reform_passed = landfriede }
				ROOT = { is_part_of_hre = no }
			}
		}
	}
	selection_weight = {
		factor = 1
		modifier = {
			factor = 2
			army_size_percentage = 0.75
		}
		modifier = {
			factor = 2
			army_size_percentage = 1
		}
	}
	pre_effect = {
		random_neighbor_country = {
			limit = {
				NOT = { is_subject_of = root }
				NOT = { overlord_of = root }
				NOT = { alliance_with = root }
				NOT = { ROOT = { truce_with = prev } }
				NOT = { 
					has_opinion = {
						who = root
						value = 50
					}
				}
				ROOT = {
					knows_country = prev
				}
				any_owned_province = {
					any_neighbor_province = {
						owned_by = root
					}
					NOT = {
						owned_by = root
					}
					OR = {
						trade_goods = livestock
						trade_goods = grain
					}
				}
				OR = {
					is_part_of_hre = no
					NOT = { hre_reform_passed = landfriede }
					ROOT = { is_part_of_hre = no }
				}
			}
			random_owned_province = {
				limit = {
					any_neighbor_province = {
						owned_by = root
					}
					NOT = {
						owned_by = root
					}
					OR = {
						trade_goods = livestock
						trade_goods = grain
					}
				}
				save_event_target_as = agenda_province
			}
		}
	}
	immediate_effect = {
		if = {
			limit = {
				event_target:agenda_province = {
					NOT = { is_claim = root }
					NOT = { is_core = root }
				}
			}
			event_target:agenda_province = {
				if = {
					limit = {
						NOT = { is_claim = root }
						NOT = { is_core = root }
						OR = {
							trade_goods = livestock
							trade_goods = grain
						}
					}
					add_claim = root
				}
			}
		}
	}
	on_invalid = {
		if = {
			limit = {
				event_target:agenda_province = {
					is_claim = root
					NOT = { is_permanent_claim = root }
				}
			}
			event_target:agenda_province = {
				if = {
					limit = {
						is_claim = root
						NOT = { is_permanent_claim = root }
					}
					remove_claim = root
				}
			}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	task_requirements = {
		event_target:agenda_province = {
			owned_by = root
		}
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { is_claim = root }
			NOT = { is_core = root }
			NOT = { owned_by = root }
		}
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_peasants
			loyalty = 10
		}
		event_target:agenda_province = {
			add_province_modifier = {
				name = "GE_Peasant_Estate_Lebensraum"
				duration = 3650
			}
			add_nationalism = -10
		}
	}
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_peasants
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }
		if = {
			limit = {
				event_target:agenda_province = {
					is_claim = root
					NOT = { is_permanent_claim = root }
				}
			}
			event_target:agenda_province = {
				if = {
					limit = {
						is_claim = root
						NOT = { is_permanent_claim = root }
					}
					remove_claim = root
				}
			}
		}
    }
}

estate_peasants_inspire_peasants = {
	can_select = {
		government = republic
		NOT = {
			republican_tradition = 90
		}
	}
	selection_weight = {
		factor = 1
		modifier = {
			factor = 2
			NOT = { republican_tradition = 75 }
		}
		modifier = {
			factor = 2
			NOT = { republican_tradition = 50 }
		}
		modifier = {
			factor = 2
			NOT = { republican_tradition = 25 }
		} 
	}
	pre_effect = {
		ROOT = {
			if = {
				limit = {
					check_variable = {
						which = country_republican_tradition
						value = 1
					}
				}
				set_variable = {
					which = country_republican_tradition
					value = 0
				}
			}
			if = {
				limit = {
					republican_tradition = 85
				}
				change_variable = {
					which = country_republican_tradition
					value = 6
				}
			}
			else_if = {
				limit = {
					republican_tradition = 70
				}
				change_variable = {
					which = country_republican_tradition
					value = 5
				}
			}
			else_if = {
				limit = {
					republican_tradition = 55
				}
				change_variable = {
					which = country_republican_tradition
					value = 4
				}
			}
			else_if = {
				limit = {
					republican_tradition = 40
				}
				change_variable = {
					which = country_republican_tradition
					value = 3
				}
			}
			else_if = {
				limit = {
					republican_tradition = 25
				}
				change_variable = {
					which = country_republican_tradition
					value = 2
				}
			}
			else = {
				change_variable = {
					which = country_republican_tradition
					value = 1
				}
			}
		}
	}
	immediate_effect = {
		add_country_modifier = {
			name = GE_Peasant_Estate_Stabilization
			duration = 7300
		}
	}
	on_invalid = {
	}
	provinces_to_highlight = {
	}
	task_requirements = {
		if = { 
			limit = {
				check_variable = { which = country_republican_tradition value = 6 }
			}
			republican_tradition = 100
		}
		else_if = { 
			limit = {
				check_variable = { which = country_republican_tradition value = 5 }
			}
			republican_tradition = 85
		}
		else_if = { 
			limit = {
				check_variable = { which = country_republican_tradition value = 4 }
			}
			republican_tradition = 70
		}
		else_if = { 
			limit = {
				check_variable = { which = country_republican_tradition value = 3 }
			}
			republican_tradition = 55
		}
		else_if = { 
			limit = {
				check_variable = { which = country_republican_tradition value = 2 }
			}
			republican_tradition = 40
		}
		else_if = { 
			limit = {
				check_variable = { which = country_republican_tradition value = 1 }
			}
			republican_tradition = 25
		}
	}
	fail_if = {
		NOT = {
			has_country_modifier = GE_Peasant_Estate_Stabilization
		}
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_peasants
			loyalty = 10
		}
		remove_country_modifier = GE_Peasant_Estate_Stabilization
		add_country_modifier = {
			name = GE_Peasant_Estate_Stabilized
			duration = 9125
		}
	}
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_peasants
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }
    }
}

#GE_ghulams_agendas
#(Nearly) all scopes are country scope
#All parameters are optional (but it will not be much of an agenda without some of them...)

# estate_agenda = {
# 	max_days_active = 100 						#Lets you override the default of 20 years for an agenda
# 	can_select = { triggers } 					#Conditions for whether the agenda can be offered to you
# 	provinces_to_highlight = { triggers }		#Conditions for provinces to be highlighted by the agenda. Root = country, this = province.
# 	selection_weight = {						#Determines how likely (compared to the estate's other agendas) this agenda is to be selected.
# 		factor = 1.0 									#initial factor will ignore numbers below 1, use a modifier for that!
# 		modifier = { factor = 10 triggers = yes }
# 	}
# 	pre_effect = { effects }					#Effects executed to set up the task (set flags and targets), before it is shown to the player.
# 	immediate_effect = { effects } 				#Effects executed when the agenda is accepted by the country
# 	task_requirements = { triggers } 			#Conditions for completing the task successfully
# 	task_completed_effect = { effects } 		#Effects executed when the agenda is successfully completed
# 	failing_effect = { effects } 				#Effects executed when the agenda is failed (i.e. when fail_if is true or time runs out)
# 	fail_if = { triggers } 						#Conditions for when the agenda should be auto-failed
# 	on_invalid = { effects } 					#Effects executed when the country no longer has that estate or the invalid_trigger is true. Useful for clearing flags, modifiers etc.
# 	invalid_trigger = { triggers } 				#Conditions for when the agenda should end without it counting as a fail (executing on_invalid rather than failing_effect). Happens by default it the estate giving the agenda is removed.
# 	modifier = { modifier } 					#Country modifier granted while the agenda is active
# }


#estate_ghulams_develop_x = {
#	selection_weight = {
#		factor = 1
#	}
#	can_select = {
#		any_owned_province = {
#			is_state_core = root
#		}
#	}
#	pre_effect = {
#		random_owned_province = {
#			limit = {
#				is_state_core = root
#			}
#			save_event_target_as = agenda_province
#		}
#		event_target:agenda_province = {
#			if = {
#				limit = {
#					check_variable = {
#						which = province_adm_var
#						value = 1
#					}
#				}
#				set_variable = {
#					which = province_adm_var
#					value = 0
#				}
#			}
#			export_to_variable = {
#				which = province_adm_var
#				value = trigger_value:base_tax
#			}
#			change_variable = {
#				which = province_adm_var
#				value = 2
#			}
#		}
#	}
#	provinces_to_highlight = {
#		province_id = event_target:agenda_province
#	}
#	fail_if = {
#		event_target:agenda_province = {
#			NOT = { owned_by = root }
#		}
#	}
#    task_requirements = {
#		event_target:agenda_province = {
#			base_tax = "province_adm_var"
#		}
#    }
#    task_completed_effect = {
#		add_estate_loyalty = {
#			estate = estate_ghulams
#			loyalty = 10
#		}
#		add_years_of_income = 0.3
#    }
#    failing_effect = {
#		event_target:agenda_province = {
#			if = {
#				limit = { owned_by = root }
#				add_named_unrest = {
#					name = local_clergy_displeased
#					value = 5
#				}
#			}
#		}
#        add_estate_loyalty_modifier = {
#            estate = estate_ghulams
#			desc = EST_VAL_AGENDA_DENIED
#			loyalty = -5
#			duration = 7300
#        }
#    }
#}

#estate_ghulams_reduce_autonomy = {
#	selection_weight = {
#		factor = 2
#	}
#	can_select = {
#		any_owned_province = {
#			is_state_core = ROOT
#			local_autonomy = 25
#		}
#	}
#	pre_effect = {
#		random_owned_province = {
#			limit = {
#				is_state_core = root
#				local_autonomy = 25
#			}
#			save_event_target_as = agenda_province
#		}
#		event_target:agenda_province = {
#			if = {
#				limit = {
#					check_variable = {
#						which = province_autonomy_var
#						value = 1
#					}
#				}
#				set_variable = {
#					which = province_autonomy_var
#					value = 0
#				}
#			}
#			if = {
#				limit = {
#					local_autonomy = 75
#				}
#				change_variable = {
#					which = province_autonomy_var
#					value = 3
#				}
#			}
#			else_if = {
#				limit = {
#					local_autonomy = 50
#				}
#				change_variable = {
#					which = province_autonomy_var
#					value = 2
#				}
#			}
#			else = {
#				change_variable = {
#					which = province_autonomy_var
#					value = 1
#				}
#			}
#		}
#	}
#	provinces_to_highlight = {
#		province_id = event_target:agenda_province
#	}
#	fail_if = {
#		event_target:agenda_province = {
#			NOT = { owned_by = root }
#		}
#	}
#	task_requirements = {
#		event_target:agenda_province = {
#			if = { 
#				limit = {
#					check_variable = { which = province_autonomy_var value = 3 }
#				}
#				NOT = { local_autonomy = 75 }
#			}
#			else_if = { 
#				limit = {
#					check_variable = { which = province_autonomy_var value = 2 }
#				}
#				NOT = { local_autonomy = 50 }
#			}
#			else = {
#				NOT = { local_autonomy = 1 }
#			}
#		}
#	}
#    task_completed_effect = {
#		add_estate_loyalty = {
#			estate = estate_ghulams
#			loyalty = 10
#		}
#		event_target:agenda_province = {
#			add_base_tax = 1
#		}
#    }
#    failing_effect = {
#		event_target:agenda_province = {
#			if = {
#				limit = { owned_by = root }
#				add_named_unrest = {
#					name = local_clergy_displeased
#					value = 5
#				}
#			}
#		}
#        add_estate_loyalty_modifier = {
#            estate = estate_ghulams
#			desc = EST_VAL_AGENDA_DENIED
#			loyalty = -5
#			duration = 7300
#        }
#    }
#}

#estate_ghulams_increase_absolutism = {
#	selection_weight = {
#		factor = 5
#	}
#	can_select = {
#		absolutism = 1
#		NOT = { absolutism = 75 }
#	}
#	pre_effect = {
#		export_to_variable = {
#			which = max_absolutism_var
#			value = trigger_value:absolutism
#		}
#		change_variable = {
#			which = max_absolutism_var
#			value = 10
#		}
#	}
#	provinces_to_highlight = {
#	}
#	fail_if = {
#	}
#    task_requirements = {
#		absolutism = max_absolutism_var
#    }
#    task_completed_effect = {
#		add_estate_loyalty = {
#			estate = estate_ghulams
#			loyalty = 10
#		}
#		add_stability = 1
#    }
#    failing_effect = {
#		event_target:agenda_province = {
#			if = {
#				limit = { owned_by = root }
#				add_named_unrest = {
#					name = local_clergy_displeased
#					value = 5
#				}
#			}
#		}
#        add_estate_loyalty_modifier = {
#            estate = estate_ghulams
#			desc = EST_VAL_AGENDA_DENIED
#			loyalty = -5
#			duration = 7300
#        }
#    }
#}

#estate_ghulams_build_courthouse = {
#	selection_weight = {
#		factor = 2
#	}
#	can_select = {
#		adm_tech = 25
#		any_owned_province = {
#			is_state_core = ROOT
#			NOT = { has_building = courthouse }
#			NOT = { has_building = town_hall  }
#		}
#	}
#	pre_effect = {
#		random_owned_province = {
#			limit = {
#				is_state_core = root
#				NOT = { has_building = courthouse }
#				NOT = { has_building = town_hall  }
#			}
#			save_event_target_as = agenda_province
#		}
#	}
#	provinces_to_highlight = {
#		province_id = event_target:agenda_province
#	}
#	fail_if = {
#		event_target:agenda_province = {
#			NOT = { owned_by = root }
#		}
#	}
#    task_requirements = {
#		event_target:agenda_province = {
#			has_building = courthouse
#		}
#    }
#    task_completed_effect = {
#		add_estate_loyalty = {
#			estate = estate_ghulams
#			loyalty = 10
#		}
#		if = { 
#			limit = {
#				absolutism = 1
#			}
#			add_absolutism = 5
#		}
#		else = {
#			event_target:agenda_province = {
#				add_province_modifier = {
#					name = "GE_Ghulams_Estate_Brought_Justice"
#					duration = 3650
#				}
#			}
#		}
#    }
#    failing_effect = {
#        add_estate_loyalty_modifier = {
#            estate = estate_ghulams
#			desc = EST_VAL_AGENDA_DENIED
#			loyalty = -5
#			duration = 7300
#        }
#    }
#}

#estate_ghulams_diversify_court = {
#	selection_weight = {
#		factor = 10
#	}
#	can_select = {
#		any_owned_province = {
#			OR = {
#				culture = armenian
#				culture = georgian
#			}
#		}
#		NOT = {
#			OR = {
#				employed_advisor = {
#					culture = armenian
#				}
#				employed_advisor = {
#					culture = georgian
#				}
#			}
#		}
#	}
#	pre_effect = {
#	}
#	provinces_to_highlight = {
#	}
#	fail_if = {
#	}
#    task_requirements = {
#		OR = {
#			employed_advisor = {
#				culture = armenian
#			}
#			employed_advisor = {
#				culture = georgian
#			}
#		}
#    }
#    task_completed_effect = {
#		add_estate_loyalty = {
#			estate = estate_ghulams
#			loyalty = 10
#		}
#		add_country_modifier = {
#			name = "GE_Ghulams_Estate_Ghulam_Advisors"
#			duration = 3650
#		}
#    }
#    failing_effect = {
#        add_estate_loyalty_modifier = {
#            estate = estate_ghulams
#			desc = EST_VAL_AGENDA_DENIED
#			loyalty = -10
#			duration = 7300
#        }
#    }
#}

#estate_ghulams_expand_artillery = {
#	selection_weight = {
#		factor = 10
#		modifier = {
#			factor = 10
#			NOT = {
#				num_of_artillery = 1
#			}
#		}
#	}
#	can_select = {
#		mil_tech = 24
#		NOT = {
#			artillery_fraction = 0.3
#		}
#	}
#	pre_effect = {
#		ROOT = {
#			if = {
#				limit = {
#					check_variable = {
#						which = army_arty_var
#						value = 1
#					}
#				}
#				set_variable = {
#					which = army_arty_var
#					value = 0
#				}
#			}
#			if = {
#				limit = {
#					land_forcelimit = 100
#				}
#				change_variable = {
#					which = army_arty_var
#					value = 3
#				}
#			}
#			else_if = {
#				limit = {
#					land_forcelimit = 50
#				}
#				change_variable = {
#					which = army_arty_var
#					value = 2
#				}
#			}
#			else = {
#				change_variable = {
#					which = army_arty_var
#					value = 1
#				}
#			}
#		}
#	}
#	immediate_effect = {
#	}
#	on_invalid = {
#	}
#	provinces_to_highlight = {
#	}
#	task_requirements = {
#		if = { 
#			limit = {
#				check_variable = { which = army_arty_var value = 3 }
#			}
#			artillery_fraction = 0.3
#		}
#		else_if = { 
#			limit = {
#				check_variable = { which = army_arty_var value = 2 }
#			}
#			artillery_fraction = 0.2
#		}
#		else_if = { 
#			limit = {
#				check_variable = { which = army_arty_var value = 1 }
#			}
#			artillery_fraction = 0.1
#		}
#	}
#	fail_if = {
#		NOT = { always = yes }
#	}
#	task_completed_effect = {
#		add_estate_loyalty = {
#			estate = estate_ghulams
#			loyalty = 10
#		}
#		add_country_modifier = {
#			name = GE_Ghulams_Estate_New_Cannons
#			duration = 3650
#		}
#	}
#    failing_effect = {
#        add_estate_loyalty_modifier = {
#            estate = estate_ghulams
#			desc = EST_VAL_AGENDA_DENIED
#			loyalty = -5
#			duration = 7300
#        }
#    }
#}

#estate_ghulams_restore_order = {
#	selection_weight = {
#		factor = 10
#	}
#	can_select = {
#		num_of_rebel_armies = 1
#		num_of_rebel_controlled_provinces = 1
#	}
#	pre_effect = {
#	}
#	immediate_effect = {
#	}
#	on_invalid = {
#	}
#	provinces_to_highlight = {
#	}
#	task_requirements = {
#		NOT = { num_of_rebel_armies = 1 }
#		NOT = { num_of_rebel_controlled_provinces = 1 }	
#	}
#	fail_if = {
#		NOT = { always = yes }
#	}
#	task_completed_effect = {
#		add_estate_loyalty = {
#			estate = estate_ghulams
#			loyalty = 10
#		}
#		add_ruler_modifier = {
#			name = GE_Ghulams_Estate_Order_Restored
#			duration = 3650
#		}
#	}
#    failing_effect = {
#        add_estate_loyalty_modifier = {
#            estate = estate_ghulams
#			desc = EST_VAL_AGENDA_DENIED
#			loyalty = -5
#			duration = 7300
#        }
#    }
#}

#estate_turkic_tribes_agendas
estate_turkic_tribes_build_tax_building = {
	can_select = {
		any_owned_province = {
			is_state_core = root
			culture = ROOT
			NOT = { has_building = cathedral }
			OR = {
				AND = {
					NOT = { has_building = temple }
					num_free_building_slots = 1
				}
				AND = {
					ROOT = { adm_tech = 36 }
					OR = {
						has_building = temple
						num_free_building_slots = 1
					}
				}
			}
		}
		ROOT = { adm_tech = 21 }
	}
	selection_weight = {
		factor = 1
		modifier = {
			factor = 0.65
			NOT = {
				any_owned_province = {
					is_state_core = root
					culture = ROOT
					base_tax = 4
					NOT = { has_building = cathedral }
					OR = {
						AND = {
							NOT = { has_building = temple }
							num_free_building_slots = 1
						}
						AND = {
							ROOT = { adm_tech = 36 }
							OR = {
								has_building = temple
								num_free_building_slots = 1
							}
						}
					}
				}
			}
		}
		modifier = {
			factor = 2
			NOT = {
				crown_land_share = 15
			}
		}
	}
	pre_effect = {
		set_variable = {
			which = estate_turkic_tribes_build_production_building_in_y_var
			value = 0
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				culture = ROOT
				NOT = { has_building = cathedral }
				OR = {
					AND = {
						NOT = { has_building = temple }
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { adm_tech = 36 }
						OR = {
							has_building = temple
							num_free_building_slots = 1
						}
					}
				}
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				culture = ROOT
				base_tax = 4
				NOT = { has_building = cathedral }
				OR = {
					AND = {
						NOT = { has_building = temple }
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { adm_tech = 36 }
						OR = {
							has_building = temple
							num_free_building_slots = 1
						}
					}
				}
			}
			save_event_target_as = agenda_province
		}
		event_target:agenda_province = {
			if = {
				limit = {
					has_building = temple
				}
				ROOT = {
					set_variable = {
						which = estate_turkic_tribes_build_tax_building_in_y_var
						value = 2
					}
				}
			}
			else = {
				ROOT = {
					set_variable = {
						which = estate_turkic_tribes_build_tax_building_in_y_var
						value = 1
					}
				}
			}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
	task_requirements = {
		if = {
			limit = {
				check_variable = {
					which = estate_turkic_tribes_build_tax_building_in_y_var
					value = 2
				}
			}
			event_target:agenda_province = {
				has_building = cathedral
			}
		}
		else = {
			event_target:agenda_province = {
				has_tax_building_trigger = yes
			}
		}
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_turkic_tribes
			loyalty = 10
		}
		event_target:agenda_province = {
			add_base_tax = 1
		}
	}
	failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_turkic_tribes
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
		}
	}
}

estate_turkic_tribes_expand_tribal_land = {
	can_select = {
		any_owned_province = {
			is_state_core = ROOT
			culture = ROOT
			any_neighbor_province = {
				owned_by = ROOT
				NOT = { culture = ROOT }
			}
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
				is_state_core = ROOT
				culture = ROOT
				any_neighbor_province = {
					owned_by = ROOT
					NOT = { culture = ROOT }
				}
			}
			random_neighbor_province = {
				limit = {
					owned_by = ROOT
					NOT = { culture = ROOT }
				}
				save_event_target_as = agenda_province
			}
		}
		random_owned_province = {
			limit = {
				is_state_core = ROOT
				culture = ROOT
				any_neighbor_province = {
					owned_by = ROOT
					NOT = { culture = ROOT }
				}
			}
			random_neighbor_province = {
				limit = {
					owned_by = ROOT
					NOT = { culture = ROOT }
					NOT = { development = 20 }
				}
				save_event_target_as = agenda_province
			}
		}
		random_owned_province = {
			limit = {
				is_state_core = ROOT
				culture = ROOT
				any_neighbor_province = {
					owned_by = ROOT
					NOT = { culture = ROOT }
				}
			}
			random_neighbor_province = {
				limit = {
					owned_by = ROOT
					NOT = { culture = ROOT }
					NOT = { development = 15 }
				}
				save_event_target_as = agenda_province
			}
		}
		random_owned_province = {
			limit = {
				is_state_core = ROOT
				culture = ROOT
				any_neighbor_province = {
					owned_by = ROOT
					NOT = { culture = ROOT }
				}
			}
			random_neighbor_province = {
				limit = {
					owned_by = ROOT
					NOT = { culture = ROOT }
					NOT = { development = 10 }
				}
				save_event_target_as = agenda_province
			}
		}
		random_owned_province = {
			limit = {
				is_state_core = ROOT
				culture = ROOT
				any_neighbor_province = {
					owned_by = ROOT
					NOT = { culture = ROOT }
				}
			}
			random_neighbor_province = {
				limit = {
					owned_by = ROOT
					NOT = { culture = ROOT }
					NOT = { development = 7 }
				}
				save_event_target_as = agenda_province
			}
		}
		event_target:agenda_province = {
			if = {
				limit = {
					check_variable = {
						which = province_dev_var
						value = 1
					}
				}
				set_variable = {
					which = province_dev_var
					value = 0
				}
			}
			export_to_variable = {
				which = province_dev_var
				value = trigger_value:base_tax
			}
			change_variable = {
				which = province_dev_var
				value = 3
			}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
	task_requirements = {
		event_target:agenda_province = {
			base_tax = "province_dev_var"
		}
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_turkic_tribes
			loyalty = 15
		}
		event_target:agenda_province = {
			change_culture = ROOT
		}
	}
	failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_turkic_tribes
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
		}
	}
}

estate_turkic_tribes_build_manpower_building = {
	can_select = {
		any_owned_province = {
			is_state_core = root
			culture = ROOT
			NOT = { has_building = training_fields  }
			OR = {
				AND = {
					NOT = { has_building = barracks }
					num_free_building_slots = 1
				}
				AND = {
					ROOT = { mil_tech = 33 }
					OR = {
						has_building = barracks
						num_free_building_slots = 1
					}
				}
			}
		}
		ROOT = { mil_tech = 23 }
	}
	selection_weight = {
		factor = 1
		modifier = {
			factor = 0.65
			NOT = {
				any_owned_province = {
					is_state_core = root
					culture = ROOT
					base_manpower = 4
					NOT = { has_building = training_fields  }
					OR = {
						AND = {
							NOT = { has_building = barracks }
							num_free_building_slots = 1
						}
						AND = {
							ROOT = { mil_tech = 33 }
							OR = {
								has_building = barracks
								num_free_building_slots = 1
							}
						}
					}
				}
			}
		}
		modifier = {
			factor = 2
			NOT = {
				crown_land_share = 15
			}
		}
	}
	pre_effect = {
		set_variable = {
			which =estate_turkic_tribes_build_production_building_in_y_var
			value = 0
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				culture = ROOT
				NOT = { has_building = training_fields  }
				OR = {
					AND = {
						NOT = { has_building = barracks }
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { mil_tech = 33 }
						OR = {
							has_building = barracks
							num_free_building_slots = 1
						}
					}
				}
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				culture = ROOT
				base_manpower = 4
				NOT = { has_building = training_fields  }
				OR = {
					AND = {
						NOT = { has_building = barracks }
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { mil_tech = 33 }
						OR = {
							has_building = barracks
							num_free_building_slots = 1
						}
					}
				}
			}
			save_event_target_as = agenda_province
		}
		event_target:agenda_province = {
			if = {
				limit = {
					has_building = barracks
				}
				ROOT = {
					set_variable = {
						which = estate_turkic_tribes_build_manpower_building_in_y_var
						value = 2
					}
				}
			}
			else = {
				ROOT = {
					set_variable = {
						which = estate_turkic_tribes_build_manpower_building_in_y_var
						value = 1
					}
				}
			}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
	task_requirements = {
		if = {
			limit = {
				check_variable = {
					which = estate_turkic_tribes_build_manpower_building_in_y_var
					value = 2
				}
			}
			event_target:agenda_province = {
				has_building = training_fields
			}
		}
		else = {
			event_target:agenda_province = {
				has_manpower_building_trigger = yes
			}
		}
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_turkic_tribes
			loyalty = 10
		}
		event_target:agenda_province = {
			add_base_manpower = 1
		}
	}
	failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_turkic_tribes
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
		}
	}
}

estate_turkic_tribes_develop = {
	can_select = {
		any_owned_province = {
			is_state_core = ROOT
			culture = ROOT
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
				is_state_core = ROOT
				culture = ROOT
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = ROOT
				culture = ROOT
				NOT = { development = 20 }
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = ROOT
				culture = ROOT
				NOT = { development = 15 }
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = ROOT
				culture = ROOT
				NOT = { development = 10 }
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = ROOT
				culture = ROOT
				NOT = { development = 7 }
			}
			save_event_target_as = agenda_province
		}
		event_target:agenda_province = {
			if = {
				limit = {
					check_variable = {
						which = province_dev_var
						value = 1
					}
				}
				set_variable = {
					which = province_dev_var
					value = 0
				}
			}
			export_to_variable = {
				which = province_dev_var
				value = trigger_value:base_tax
			}
			change_variable = {
				which = province_dev_var
				value = 2
			}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
	task_requirements = {
		event_target:agenda_province = {
			base_tax = "province_dev_var"
		}
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_turkic_tribes
			loyalty = 10
		}
		add_years_of_income = 0.25
	}
	failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_turkic_tribes
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
		}
	}
}

estate_turkic_tribes_hire_root_culture_advisor = {
	can_select = {
		NOT = {
			employed_advisor = {
				culture = ROOT
			}
		}
		NOT = { has_country_modifier = estate_turkic_tribes_advisor_cost }
	}
	selection_weight = {
		factor = 1.5
	}
	pre_effect = {
	}
	provinces_to_highlight = {
	}
	fail_if = {
	}
	task_requirements = {
		employed_advisor = {
			culture = ROOT
		}
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_turkic_tribes
			loyalty = 10
		}
		
		add_country_modifier = {
			name = estate_turkic_tribes_advisor_cost
			duration = 3650
		}
	}
	failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_turkic_tribes
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
		}
	}
}

estate_turkic_tribes_increase_tribal_allegiance = {
	can_select = {
		ME_tribal_federation_trigger = yes
		has_dlc = "Cradle of Civilization"
		NOT = { 
			has_government_power = {
				mechanic_type = tribal_federation_mechanic
				power_type = tribal_allegiance
				value = 80
			} 
		}
	}
	selection_weight = {
		factor = 1.5
	}
	pre_effect = {
		if = {
			limit = {
				NOT = {
					has_government_power = {
						mechanic_type = tribal_federation_mechanic
						power_type = tribal_allegiance
						value = 10
					}
				}
			}
			set_variable = {
				which = agenda_variable
				value = 20
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_government_power = {
						mechanic_type = tribal_federation_mechanic
						power_type = tribal_allegiance
						value = 20
					}
				}
			}
			set_variable = {
				which = agenda_variable
				value = 30
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_government_power = {
						mechanic_type = tribal_federation_mechanic
						power_type = tribal_allegiance
						value = 30
					}
				}
			}
			set_variable = {
				which = agenda_variable
				value = 40
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_government_power = {
						mechanic_type = tribal_federation_mechanic
						power_type = tribal_allegiance
						value = 40
					}
				}
			}
			set_variable = {
				which = agenda_variable
				value = 50
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_government_power = {
						mechanic_type = tribal_federation_mechanic
						power_type = tribal_allegiance
						value = 50
					}
				}
			}
			set_variable = {
				which = agenda_variable
				value = 60
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_government_power = {
						mechanic_type = tribal_federation_mechanic
						power_type = tribal_allegiance
						value = 60
					}
				}
			}
			set_variable = {
				which = agenda_variable
				value = 70
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_government_power = {
						mechanic_type = tribal_federation_mechanic
						power_type = tribal_allegiance
						value = 70
					}
				}
			}
			set_variable = {
				which = agenda_variable
				value = 80
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_government_power = {
						mechanic_type = tribal_federation_mechanic
						power_type = tribal_allegiance
						value = 10
					}
				}
			}
			set_variable = {
				which = agenda_variable
				value = 90
			}
		}
		else = { }
	}
	provinces_to_highlight = {
	}
	fail_if = {
	}
	task_requirements = {
		if = {
			limit = {
				check_variable = {
					which = agenda_variable
					value = 90
				}
			}
			has_government_power = {
				mechanic_type = tribal_federation_mechanic
				power_type = tribal_allegiance
				value = 90
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = agenda_variable
					value = 80
				}
			}
			has_government_power = {
				mechanic_type = tribal_federation_mechanic
				power_type = tribal_allegiance
				value = 80
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = agenda_variable
					value = 70
				}
			}
			has_government_power = {
				mechanic_type = tribal_federation_mechanic
				power_type = tribal_allegiance
				value = 70
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = agenda_variable
					value = 60
				}
			}
			has_government_power = {
				mechanic_type = tribal_federation_mechanic
				power_type = tribal_allegiance
				value = 60
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = agenda_variable
					value = 50
				}
			}
			has_government_power = {
				mechanic_type = tribal_federation_mechanic
				power_type = tribal_allegiance
				value = 50
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = agenda_variable
					value = 40
				}
			}
			has_government_power = {
				mechanic_type = tribal_federation_mechanic
				power_type = tribal_allegiance
				value = 40
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = agenda_variable
					value = 30
				}
			}
			has_government_power = {
				mechanic_type = tribal_federation_mechanic
				power_type = tribal_allegiance
				value = 30
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = agenda_variable
					value = 20
				}
			}
			has_government_power = {
				mechanic_type = tribal_federation_mechanic
				power_type = tribal_allegiance
				value = 20
			}
		}
		else = {
		}
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_turkic_tribes
			loyalty = 20
		}
		
		add_mil_power = 100
		
		hidden_effect = {
			set_variable = {
				which = agenda_variable
				value = 0
			}
		}
	}
	failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_turkic_tribes
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
		}
		
		hidden_effect = {
			set_variable = {
				which = agenda_variable
				value = 0
			}
		}
	}
}

#estate_maya_agendas
estate_maya_build_university = {
	can_select = {
		can_select_estate_agenda_estate_maya_build_university = yes
	}
	selection_weight = {
		factor = 1
		modifier = {
			factor = 2
			NOT = {
				num_of_owned_provinces_with = {
					value = 3
					has_building = university
				}
			}
		}
		modifier = {
			factor = 0.75
			num_of_owned_provinces_with = {
				value = 10
				has_building = university
			}
		}
		modifier = {
			factor = 0.5
			num_of_owned_provinces_with = {
				value = 20
				has_building = university
			}
		}
	}
	pre_effect = {
		if = {
			limit = {
				capital_scope = {
					is_state_core = ROOT
					NOT = { has_building = university }
					OR = {
						num_free_building_slots = 1
						NOT = { num_of_buildings_in_province = 12 }
					}
				}
			}
			capital_scope = {
				save_event_target_as = agenda_province
			}
		}
		else_if = {
			limit = {
				any_owned_province = {
					is_state_core = ROOT
					NOT = { has_building = university }
					OR = {
						num_free_building_slots = 1
						NOT = { num_of_buildings_in_province = 12 }
					}
					development = 15
				}
			}
			random_owned_province = {
				limit = {
					is_state_core = ROOT
					NOT = { has_building = university }
					OR = {
						num_free_building_slots = 1
						NOT = { num_of_buildings_in_province = 12 }
					}
					development = 15
				}
				save_event_target_as = agenda_province
			}
		}
		else_if = {
			limit = {
				any_owned_province = {
					is_state_core = ROOT
					NOT = { has_building = university }
					OR = {
						num_free_building_slots = 1
						NOT = { num_of_buildings_in_province = 12 }
					}
					development = 10
				}
			}
			random_owned_province = {
				limit = {
					is_state_core = ROOT
					NOT = { has_building = university }
					OR = {
						num_free_building_slots = 1
						NOT = { num_of_buildings_in_province = 12 }
					}
					development = 10
				}
				save_event_target_as = agenda_province
			}
		}
		else_if = {
			limit = {
				any_owned_province = {
					is_state_core = ROOT
					NOT = { has_building = university }
					OR = {
						num_free_building_slots = 1
						NOT = { num_of_buildings_in_province = 12 }
					}
					development = 5
				}
			}
			random_owned_province = {
				limit = {
					is_state_core = ROOT
					NOT = { has_building = university }
					OR = {
						num_free_building_slots = 1
						NOT = { num_of_buildings_in_province = 12 }
					}
					development = 5
				}
				save_event_target_as = agenda_province
			}
		}
		else = {
			random_owned_province = {
				limit = {
					is_state_core = ROOT
					NOT = { has_building = university }
					OR = {
						num_free_building_slots = 1
						NOT = { num_of_buildings_in_province = 12 }
					}
				}
				save_event_target_as = agenda_province
			}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
		NOT = { has_building = university }
	}
	task_requirements = {
		event_target:agenda_province = {
			has_building = university
		}
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_maya
			loyalty = 10
		}
		add_adm_power = 35
		add_dip_power = 35
		add_mil_power = 35
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = ROOT }
		}
	}
	failing_effect = {
		event_target:agenda_province = {
			if = {
				limit = {
					owned_by = ROOT
				}
				add_unrest = 5
			}
		}
		add_estate_loyalty_modifier = {
			estate = estate_maya
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
		}
	}
	invalid_trigger = {
		event_target:agenda_province = {
			num_of_buildings_in_province = 12
			NOT = { num_free_building_slots = 1 }
		}
	}
	modifier = {
		build_cost = -0.05
	}
}

estate_maya_develop_province = {
	can_select = {
		can_select_estate_agenda_estate_maya_develop_province = yes
	}
	selection_weight = {
		factor = 1
		modifier = {
			factor = 0.75
			all_owned_province = {
				OR = {
					NOT = { is_state_core = ROOT }
					development = 10
				}
			}
		}
		modifier = {
			factor = 0.5
			all_owned_province = {
				OR = {
					NOT = { is_state_core = ROOT }
					development = 10
				}
			}
		}
	}
	pre_effect = {
		if = {
			limit = {
				any_owned_province = {
					is_state_core = ROOT
					NOT = { development = 5 }
				}
			}
			random_owned_province = {
				limit = {
					is_state_core = ROOT
					NOT = { development = 5 }
				}
				save_event_target_as = agenda_province
			}
		}
		else_if = {
			limit = {
				any_owned_province = {
					is_state_core = ROOT
					NOT = { development = 10 }
				}
			}
			random_owned_province = {
				limit = {
					is_state_core = ROOT
					NOT = { development = 10 }
				}
				save_event_target_as = agenda_province
			}
		}
		else = {
			random_owned_province = {
				limit = {
					is_state_core = ROOT
				}
				save_event_target_as = agenda_province
			}
		}
		event_target:agenda_province = {
			export_to_variable = {
				which = province_dev_var
				value = trigger_value:development #Not sure trigger_value:development works
			}
			change_variable = { which = province_dev_var value = 4 }
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
		variable_arithmetic_trigger = {
			custom_tooltip = ESTATE_MAYA_DEVELOP_PROVINCE_TRIGGER_TT
			export_to_variable = {
				which = current_dev
				value = trigger_value:development
			}
			check_variable = { which = current_dev which = province_dev_var }
		}
	}
	task_requirements = {
		event_target:agenda_province = {
			variable_arithmetic_trigger = {
				custom_tooltip = ESTATE_MAYA_DEVELOP_PROVINCE_TRIGGER_TT
				export_to_variable = {
					which = current_dev
					value = trigger_value:development
				}
				check_variable = { which = current_dev which = province_dev_var }
			}
		}
	}
	task_completed_effect = {
		add_prestige = 10
		add_estate_loyalty = {
			estate = estate_maya
			loyalty = 10
		}
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = ROOT }
		}
	}
	failing_effect = {
		event_target:agenda_province = {
			if = {
				limit = {
					owned_by = ROOT
				}
				add_unrest = 5
			}
		}
		add_estate_loyalty_modifier = {
			estate = estate_maya
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
		}
	}
	modifier = {
		development_cost = -0.05
	}
}

estate_maya_teach_ruler = {
	can_select = {
		can_select_estate_agenda_estate_maya_teach_ruler = yes
	}
	selection_weight = {
		factor = 5
		modifier = {
			factor = 3
			NOT = { ruler_age = 25 }
		}
		modifier = {
			factor = 0.75
			ruler_age = 50
		}
		modifier = {
			factor = 0.5
			ruler_age = 60
		}
		modifier = {
			factor = 0.25
			ruler_age = 70
		}
	}
	immediate_effect = {
		set_ruler_flag = estate_maya_teach_ruler_flag
	}
	provinces_to_highlight = {
		is_capital_of = ROOT
	}
	task_requirements = {
		custom_trigger_tooltip = {
			tooltip = ESTATE_MAYA_TEACH_RULER_TRIGGER_TT
			had_ruler_flag = { flag = estate_maya_teach_ruler_flag days = 3650 }
		}
		OR = {
			estate_territory = {
				estate = estate_maya
				territory = 50
			}
			AND = {
				num_of_estate_privileges = {
					estate = estate_maya
					value = 1
				}
				estate_territory = {
					estate = estate_maya
					territory = 25
				}
			}
			AND = {
				estate_loyalty = {
					estate = estate_maya
					loyalty = 60
				}
				estate_influence = {
					estate = estate_maya
					influence = 50
				}
			}
		}
	}
	task_completed_effect = {
		if = {
			limit = {
				NOT = { ADM = 5 }
			}
			random_list = {
				75 = {
					change_adm = 1
					change_estate_land_share = {
						estate = estate_maya
						share = 5
					}
				}
				25 = {
					change_adm = 2
					change_estate_land_share = {
						estate = estate_maya
						share = 10
					}
				}
			}
		}
		else = {
			change_adm = 1
			change_estate_land_share = {
				estate = estate_maya
				share = 5
			}
		}
		add_estate_loyalty = {
			estate = estate_maya
			loyalty = 10
		}
	}
	fail_if = {
		custom_trigger_tooltip = {
			tooltip = ESTATE_MAYA_TEACH_RULER_FAIL_TT
			NOT = { has_ruler_flag = estate_maya_teach_ruler_flag }
		}
	}
	failing_effect = {
		add_stability = -1
		add_estate_loyalty_modifier = {
			estate = estate_maya
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
		}
	}
	modifier = {
		estate_maya_loyalty_modifier = 0.05
		estate_maya_influence_modifier = 0.15
	}
}

estate_maya_advisor_employed = {
	max_days_active = 1825
	can_select = {
		can_select_estate_agenda_estate_maya_advisor_employed = yes
	}
	selection_weight = {
		factor = 1
		modifier = {
			factor = 2
			NOT = { has_adm_advisor = yes }
		}
		modifier = {
			factor = 0.75
			has_adm_advisor = yes
		}
		modifier = {
			factor = 0.5
			has_adm_advisor_2 = yes
		}
		modifier = {
			factor = 0.25
			has_adm_advisor_3 = yes
		}
	}
	provinces_to_highlight = {
		is_capital_of = ROOT
	}
	task_requirements = {
		if = {
			limit = {
				has_dlc = "Cradle of Civilization"
			}
			mayan_scribe = 5
		}
		else = {
			mayan_scribe = 3
		}
	}
	task_completed_effect = {
		add_country_modifier = {
			name = estate_maya_advisor_employed_modifier
			duration = 1825
		}
		add_estate_loyalty = {
			estate = estate_maya
			loyalty = 10
		}
	}
}

#estate_industrial_agendas
estate_industrial_conquer_good = {
	can_select = {
		any_owned_province = {
			any_neighbor_province = {
				NOT = { owned_by = ROOT }
				area_for_scope_province = {
					NOT = { owned_by = ROOT }
					OR = {
						trade_goods = gold
						trade_goods = glass
						trade_goods = copper
						trade_goods = iron
					}
				}
			}
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_owned_province = {
			limit = {
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					area_for_scope_province = {
						NOT = { owned_by = ROOT }
						OR = {
							trade_goods = gold
							trade_goods = glass
							trade_goods = copper
							trade_goods = iron
						}
					}
				}
			}
			random_neighbor_province = {
				limit = {
					NOT = { owned_by = ROOT }
					area_for_scope_province = {
						NOT = { owned_by = ROOT }
						OR = {
							trade_goods = gold
							trade_goods = glass
							trade_goods = copper
							trade_goods = iron
						}
					}
				}
				random_province = {
					limit = {
						area = PREV
						NOT = { owned_by = ROOT }
						OR = {
							trade_goods = gold
							trade_goods = glass
							trade_goods = copper
							trade_goods = iron
						}
					}
					save_event_target_as = agenda_province
				}
			}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	task_requirements = {
		event_target:agenda_province = {
			owned_by = ROOT
		}
	}
	immediate_effect = {
		if = {
			limit = {
				event_target:agenda_province = {
					NOT = { is_core = root }
					NOT = { is_claim = root }
				}
			}
			event_target:agenda_province = {
				area = {
					add_claim = ROOT
				}
			}
		}
	}
	on_invalid = {
		event_target:agenda_province = {
			area = {
				if = {
					limit = {
						is_claim = root
						NOT = { is_permanent_claim = root }
					}
					remove_claim = root
				}
			}
		}
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_industrial
			loyalty = 10
		}
	}
	failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_industrial
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
		}
		event_target:agenda_province = {
			area = {
				if = {
					limit = {
						is_claim = root
						NOT = { is_permanent_claim = root }
					}
					remove_claim = root
				}
			}
		}
	}
}

estate_industrial_workshop = {
	can_select = {
		adm_tech = 6
		any_owned_province = {
			is_state_core = root
			NOT = { has_building = counting_house }
			OR = {
				AND = {
					NOT = { has_building = workshop }
					num_free_building_slots = 1
				}
				AND = {
					ROOT = { adm_tech = 24 }
					OR = {
						has_building = workshop
						num_free_building_slots = 1
					}
				}
			}
			NOT = {
				OR = {
					trade_goods = gold
				}
			}
		}
	}
	selection_weight = {
		factor = 1
		modifier = {
			factor = 0.65
			NOT = {
				any_owned_province = {
					is_state_core = root
					base_production = 4
					NOT = { has_building = counting_house }
					OR = {
						AND = {
							NOT = { has_building = workshop }
							num_free_building_slots = 1
						}
						AND = {
							ROOT = { adm_tech = 24 }
							OR = {
								has_building = workshop
								num_free_building_slots = 1
							}
						}
					}
					NOT = {
						OR = {
							trade_goods = gold
						}
					}
				}
			}
		}
		modifier = {
			factor = 1.2
			any_owned_province = {
				is_state_core = root
				OR = {
					base_production = 7
					has_building = wharf
					has_building = weapons
					has_building = textile
					has_building = tradecompany
					has_building = farm_estate
					has_building = mills
					has_building = plantations
					has_building = furnace
				}
				NOT = { has_building = counting_house }
				OR = {
					AND = {
						NOT = { has_building = workshop }
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { adm_tech = 24 }
						OR = {
							has_building = workshop
							num_free_building_slots = 1
						}
					}
				}
				NOT = {
					OR = {
						trade_goods = gold
					}
				}
			}
		}
		modifier = {
			factor = 2
			NOT = {
				crown_land_share = 15
			}
		}
	}
	pre_effect = {
		set_variable = {
			which = estate_burghers_build_production_building_in_y_var
			value = 0
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				NOT = { has_building = counting_house }
				OR = {
					AND = {
						NOT = { has_building = workshop }
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { adm_tech = 24 }
						OR = {
							has_building = workshop
							num_free_building_slots = 1
						}
					}
				}
				NOT = {
					OR = {
						trade_goods = gold
					}
				}
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				base_production = 4
				NOT = { has_building = counting_house }
				OR = {
					AND = {
						NOT = { has_building = workshop }
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { adm_tech = 24 }
						OR = {
							has_building = workshop
							num_free_building_slots = 1
						}
					}
				}
				NOT = {
					OR = {
						trade_goods = gold
					}
				}
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				OR = {
					base_production = 7
					has_building = wharf
					has_building = weapons
					has_building = textile
					has_building = tradecompany
					has_building = farm_estate
					has_building = mills
					has_building = plantations
					has_building = furnace
				}
				NOT = { has_building = counting_house }
				OR = {
					AND = {
						NOT = { has_building = workshop }
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { adm_tech = 24 }
						OR = {
							has_building = workshop
							num_free_building_slots = 1
						}
					}
				}
				NOT = {
					OR = {
						trade_goods = gold
					}
				}
			}
			save_event_target_as = agenda_province
		}
		event_target:agenda_province = {
			if = {
				limit = {
					has_building = workshop
				}
				ROOT = {
					set_variable = {
						which = estate_burghers_build_production_building_in_y_var
						value = 2
					}
				}
			}
			else = {
				ROOT = {
					set_variable = {
						which = estate_burghers_build_production_building_in_y_var
						value = 1
					}
				}
			}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
	task_requirements = {
		if = {
			limit = {
				check_variable = {
					which = estate_burghers_build_production_building_in_y_var
					value = 2
				}
			}
			event_target:agenda_province = {
				has_building = counting_house
			}
		}
		else = {
			event_target:agenda_province = {
				OR = {
					has_building = workshop
					has_building = counting_house
				}
			}
		}
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_industrial
			loyalty = 10
		}
		event_target:agenda_province = {
			add_base_production = 1
		}
	}
	failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_industrial
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
		}
	}
}

estate_industrial_manufactory = {
	can_select = {
		any_owned_province = {
			is_state_core = root
			root_can_build_manufactory_here_trigger = yes
		}
		monthly_income = 30
	}
	selection_weight = {
		factor = 1
		modifier = {
			factor = 0.75
			always = yes
		}
		modifier = {
			factor = 0.5
			OR = {
				current_age = age_of_discovery
				current_age = age_of_reformation
			}
		}
		modifier = {
			factor = 0.5
			NOT = { monthly_income = 40 }
		}
		modifier = {
			factor = 2
			monthly_income = 60
		}
		modifier = {
			factor = 2
			is_institution_enabled = manufactories
			NOT = { has_institution = manufactories }
		}
	}
	pre_effect = {
		random_owned_province = {
			limit = {
				is_state_core = root
				root_can_build_manufactory_here_trigger = yes
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				base_production = 5
				root_can_build_manufactory_here_trigger = yes
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				base_production = 10
				root_can_build_manufactory_here_trigger = yes
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
	task_requirements = {
		event_target:agenda_province = {
			custom_trigger_tooltip = {
				tooltip = has_manufactory_trigger_tooltip
				has_manufactory_trigger = yes
			}
		}
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_industrial
			loyalty = 10
		}
		event_target:agenda_province = {
			add_base_tax = 1
			add_province_modifier = {
				name = prospering_production
				duration = 5475
			}
		}
	}
	failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_industrial
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
		}
	}
}

estate_industrial_production_dev = {
	selection_weight = {
		factor = 1
	}
	can_select = {
		capital_scope = {
			is_state_core = root
		}
	}
	pre_effect = {
		random_list = {
			1 = {
				random_owned_province = {
					limit = {
						is_state_core = root
						area_for_scope_province = {
							is_capital_of = root
						}
					}
					save_event_target_as = agenda_province
				}
			}
			2 = {
				trigger = {
					any_owned_province = {
						is_state_core = root
						OR = {
							AND = {
								religion = root
								OR = {
									culture = root
									has_owner_accepted_culture = yes
								}
							}
						}
						region_for_scope_province = {
							is_capital_of = root
						}
					}
				}
				random_owned_province = {
					limit = {
						is_state_core = root
						OR = {
							AND = {
								religion = root
								OR = {
									culture = root
									has_owner_accepted_culture = yes
								}
							}
						}
						region_for_scope_province = {
							is_capital_of = root
						}
					}
					save_event_target_as = agenda_province
				}
			}
			1 = {
				random_owned_province = {
					limit = {
						is_state_core = root
					}
					save_event_target_as = agenda_province
				}
			}
		}
		event_target:agenda_province = {
			if = {
				limit = {
					check_variable = {
						which = province_dip_var
						value = 1
					}
				}
				set_variable = {
					which = province_dip_var
					value = 0
				}
			}
			export_to_variable = {
				which = province_dip_var
				value = trigger_value:base_production
			}
			change_variable = {
				which = province_dip_var
				value = 2
			}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
	task_requirements = {
		event_target:agenda_province = {
			base_production = "province_dip_var"
		}
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_industrial
			loyalty = 10
		}
		add_years_of_income = 0.5
	}
	failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_industrial
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
		}
	}
}

estate_industrial_blast_furnaces = {
	selection_weight = {
		factor = 5 #always select if possible
		modifier = {
			factor = 1 #but not too often
		}
	}
	can_select = {
		has_country_flag = RHN_Blast_furnaces
		NOT = {
			num_of_owned_provinces_with = {
				has_building = blast_furnace
				value = 15
			}
		}
		any_owned_province = {
			OR = {
				area = hesse_area
				area = north_rhine_area
				area = lower_rhineland_area
				area = palatinate_area
				AND = {
					ROOT = {
						has_country_flag = RHN_westphalia
					}
					area = westphalia_area
					area = north_westphalia_area
				}
			}
			NOT = {	has_building = blast_furnace }
		}
	}
	pre_effect = {
		set_variable = {
			which = estate_industrial_amount_of_furnaces
			value = 0
		}
		if = {
			limit = {
				always = yes
			}
			set_variable = {
				which = estate_industrial_amount_of_furnaces
				value = 3
			}
			if = {
				limit = {
					num_of_owned_provinces_with = {
						has_building = blast_furnace
						value = 3
					}
				}
				set_variable = {
					which = estate_industrial_amount_of_furnaces
					value = 6
				}
				if = {
					limit = {
						num_of_owned_provinces_with = {
							has_building = blast_furnace
							value = 6
						}
					}
					set_variable = {
						which = estate_industrial_amount_of_furnaces
						value = 9
					}
					if = {
						limit = {
							num_of_owned_provinces_with = {
								has_building = blast_furnace
								value = 9
							}
						}
						set_variable = {
							which = estate_industrial_amount_of_furnaces
							value = 12
						}
						if = {
							limit = {
								num_of_owned_provinces_with = {
									has_building = blast_furnace
									value = 12
								}
							}
							set_variable = {
								which = estate_industrial_amount_of_furnaces
								value = 15
							}
						}
					}
				}
			}
		}
	}
	provinces_to_highlight = {
		OR = {
			area = hesse_area
			area = north_rhine_area
			area = lower_rhineland_area
			area = palatinate_area
			AND = {
				ROOT = {
					has_country_flag = RHN_westphalia
				}
				area = westphalia_area
				area = north_westphalia_area
			}
		}
		OR = {
			NOT = {	has_building = blast_furnace }
			NOT = { owned_by = ROOT }
		}
	}
	fail_if = {
		NOT = { has_country_flag = RHN_Blast_furnaces }
	}
	task_requirements = {
		if = {
			limit = {
				check_variable = {
					which = estate_industrial_amount_of_furnaces
					value = 15
				}
			}
			num_of_owned_provinces_with = {
				has_building = blast_furnace
				value = 15
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = estate_industrial_amount_of_furnaces
					value = 12
				}
			}
			num_of_owned_provinces_with = {
				has_building = blast_furnace
				value = 12
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = estate_industrial_amount_of_furnaces
					value = 9
				}
			}
			num_of_owned_provinces_with = {
				has_building = blast_furnace
				value = 9
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = estate_industrial_amount_of_furnaces
					value = 6
				}
			}
			num_of_owned_provinces_with = {
				has_building = blast_furnace
				value = 6
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = estate_industrial_amount_of_furnaces
					value = 3
				}
			}
			num_of_owned_provinces_with = {
				has_building = blast_furnace
				value = 3
			}
		}
		else = {
			always = yes
		}
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_industrial
			loyalty = 15
		}
		add_country_modifier = {
			name = RHN_blast_furnace_cost_modifier
			duration = 1825
		}
	}
	failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_industrial
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
		}
	}
}

#estate_cultural_minorities_agendas
estate_cultural_minorities_increase_autonomy = {
	can_select = {
		any_owned_province = {
			is_state_core = root
			NOT = { local_autonomy = 75 }
			NOT = { culture_group = ROOT }
			is_capital = no
			NOT = { has_province_modifier = autonomy_increased }
			NOT = { has_province_modifier = autonomy_decreased }
		}
	}
	selection_weight = {
		factor = 1.5
	}
	pre_effect = {
		set_variable = {
			which = estate_cultural_minorities_increase_autonomy_in_province_x_var
			value = 0
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				NOT = { local_autonomy = 75 }
				NOT = { culture_group = ROOT }
				is_capital = no
				NOT = { has_province_modifier = autonomy_increased }
				NOT = { has_province_modifier = autonomy_decreased }
			}
			save_event_target_as = agenda_province
			choose_random_development_bonus_effect = yes
		}
		event_target:agenda_province = {
			if = {
				limit = {
					local_autonomy = 60
				}
				root = {
					set_variable = {
						which = estate_cultural_minorities_increase_autonomy_in_province_x_var
						value = 5
					}
				}
			}
			else_if = {
				limit = {
					local_autonomy = 45
				}
				root = {
					set_variable = {
						which = estate_cultural_minorities_increase_autonomy_in_province_x_var
						value = 4
					}
				}
			}
			else_if = {
				limit = {
					local_autonomy = 30
				}
				root = {
					set_variable = {
						which = estate_cultural_minorities_increase_autonomy_in_province_x_var
						value = 3
					}
				}
			}
			else_if = {
				limit = {
					local_autonomy = 15
				}
				root = {
					set_variable = {
						which = estate_cultural_minorities_increase_autonomy_in_province_x_var
						value = 2
					}
				}
			}
			else = {
				root = {
					set_variable = {
						which = estate_cultural_minorities_increase_autonomy_in_province_x_var
						value = 1
					}
				}
			}
		}
	}
	on_invalid = {
		event_target:agenda_province = {
			clear_random_development_bonus_flags_effect = yes
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		OR = {
			event_target:agenda_province = {
				NOT = { owned_by = root }
			}
			event_target:agenda_province = {
				culture_group = root
			}
			custom_trigger_tooltip = {
				tooltip = estate_dhimmi_increase_autonomy_in_province_x_tooltip
				hidden_trigger = {
					if = {
						limit = {
							check_variable = {
								which = estate_cultural_minorities_increase_autonomy_in_province_x_var
								value = 5
							}
						}
						event_target:agenda_province = {
							NOT = { local_autonomy = 50 }
						}
					}
					else_if = {
						limit = {
							check_variable = {
								which = estate_cultural_minorities_increase_autonomy_in_province_x_var
								value = 4
							}
						}
						event_target:agenda_province = {
							NOT = { local_autonomy = 35 }
						}
					}
					else_if = {
						limit = {
							check_variable = {
								which = estate_cultural_minorities_increase_autonomy_in_province_x_var
								value = 3
							}
						}
						event_target:agenda_province = {
							NOT = { local_autonomy = 20 }
						}
					}
					else_if = {
						limit = {
							check_variable = {
								which = estate_cultural_minorities_increase_autonomy_in_province_x_var
								value = 2
							}
						}
						event_target:agenda_province = {
							NOT = { local_autonomy = 5 }
						}
					}
					else = {
						hidden_trigger = {
							always = no
						}
					}
				}
			}	
		}
	}
	task_requirements = {
		if = {
			limit = {
				check_variable = {
					which = estate_cultural_minorities_increase_autonomy_in_province_x_var
					value = 5
				}
			}
			event_target:agenda_province = {
				local_autonomy = 75
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = estate_cultural_minorities_increase_autonomy_in_province_x_var
					value = 4
				}
			}
			event_target:agenda_province = {
				local_autonomy = 60
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = estate_cultural_minorities_increase_autonomy_in_province_x_var
					value = 3
				}
			}
			event_target:agenda_province = {
				local_autonomy = 45
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = estate_cultural_minorities_increase_autonomy_in_province_x_var
					value = 2
				}
			}
			event_target:agenda_province = {
				local_autonomy = 30
			}
		}
		else = {
			event_target:agenda_province = {
				local_autonomy = 15
			}
		}
	}
    task_completed_effect = {
		add_estate_loyalty = {
			estate = me_estate_cultural_minorities
			loyalty = 10
		}
		event_target:agenda_province = {
			apply_random_development_bonus_bonus_effect = yes
		}
    }
    failing_effect = {
		event_target:agenda_province = {
			clear_random_development_bonus_flags_effect = yes
		}
        add_estate_loyalty_modifier = {
            estate = me_estate_cultural_minorities
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }
    }
}

estate_cultural_minorities_fire_advisor = {
	can_select = {
		employed_advisor = {
			category = ADM
			culture = ROOT
		}
	}
	selection_weight = {
		factor = 1
		modifier = {
			factor = 0.5
			always = yes
		}
	}
	immediate_effect = {
		hidden_effect = {
			set_country_flag = need_to_fire_adm_advisor
		}
	}
	on_invalid = {
		clr_country_flag = need_to_fire_adm_advisor
	}
	task_requirements = {
		custom_trigger_tooltip = {
			tooltip = fire_adm_advisor_tooltip
			has_country_flag = just_fired_adm_advisor
		}
	}
    task_completed_effect = {
		add_estate_loyalty = {
			estate = me_estate_cultural_minorities
			loyalty = 10
		}
		clr_country_flag = just_fired_adm_advisor
		clr_country_flag = need_to_fire_adm_advisor
	}
	invalid_trigger = {
		NOT = {
			employed_advisor = {
				category = ADM
			}
		}
		NOT = { has_country_flag = just_fired_adm_advisor }
	}
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = me_estate_cultural_minorities
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }
		clr_country_flag = need_to_fire_adm_advisor
    }
}

estate_cultural_minorities_develop_x = {
	can_select = {
		any_owned_province = {
			NOT = { culture_group = ROOT }
			is_state_core = root
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		set_variable = {
			which = develop_x_category
			value = 0
		}
		random_list = {
			1 = { #mil
				set_variable = {
					which = develop_x_category
					value = 3
				}
			}
			1 = { #dip
				set_variable = {
					which = develop_x_category
					value = 2
				}
			}
			1 = { #adm
				set_variable = {
					which = develop_x_category
					value = 1
				}
			}
		}
		random_owned_province = {
			limit = {
				NOT = { culture_group = ROOT }
				is_state_core = root
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				NOT = { culture_group = ROOT }
			}
			save_event_target_as = agenda_province
		}
		event_target:agenda_province = {
			if = {
				limit = {
					root = {
						check_variable = {
							which = develop_x_category
							value = 3
						}
					}
				}
				if = {
					limit = {
						check_variable = {
							which = province_mil_var
							value = 1
						}
					}
					set_variable = {
						which = province_mil_var
						value = 0
					}
				}
				export_to_variable = {
					which = province_mil_var
					value = trigger_value:base_manpower
				}
				change_variable = {
					which = province_mil_var
					value = 2
				}
			}
			else_if = {
				limit = {
					root = {
						check_variable = {
							which = develop_x_category
							value = 2
						}
					}
				}
				if = {
					limit = {
						check_variable = {
							which = province_dip_var
							value = 1
						}
					}
					set_variable = {
						which = province_dip_var
						value = 0
					}
				}
				export_to_variable = {
					which = province_dip_var
					value = trigger_value:base_production
				}
				change_variable = {
					which = province_dip_var
					value = 2
				}
			}
			else = {
				if = {
					limit = {
						check_variable = {
							which = province_adm_var
							value = 1
						}
					}
					set_variable = {
						which = province_adm_var
						value = 0
					}
				}
				export_to_variable = {
					which = province_adm_var
					value = trigger_value:base_tax
				}
				change_variable = {
					which = province_adm_var
					value = 2
				}
			}
		}
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
    task_requirements = {
		event_target:agenda_province = {
			if = {
				limit = {
					root = {
						check_variable = {
							which = develop_x_category
							value = 3
						}
					}
				}
				base_manpower = "province_mil_var"
			}
			else_if = {
				limit = {
					root = {
						check_variable = {
							which = develop_x_category
							value = 2
						}
					}
				}
				base_production = "province_dip_var"
			}
			else = {
				base_tax = "province_adm_var"
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = me_estate_cultural_minorities
			loyalty = 10
		}
		if = {
			limit = {
				check_variable = {
					which = develop_x_category
					value = 3
				}
			}
			add_yearly_manpower = 0.3
		}
		else_if = {
			limit = {
				check_variable = {
					which = develop_x_category
					value = 2
				}
			}
			add_years_of_income = 0.3
		}
		else = {
			add_prestige = 10
		}
    }
    failing_effect = {
		event_target:agenda_province = {
			if = {
				limit = { owned_by = root }
				add_named_unrest = {
					name = local_culture_displeased
					value = 5
				}
			}
		}
        add_estate_loyalty_modifier = {
            estate = me_estate_cultural_minorities
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }
    }
}

estate_cultural_minorities_build_courthouse_in_y = {
	can_select = {
		adm_tech = 21
		any_owned_province = {
			NOT = { culture_group = root }
			NOT = { has_building = town_hall }
			is_state_core = root
			OR = {
				AND = {
					NOT = { has_building = courthouse }
					num_free_building_slots = 1
				}
				AND = {
					ROOT = { adm_tech = 36 }
					has_building = courthouse
				}
			}
		}
	}
	selection_weight = {
		factor = 1
		modifier = {
			factor = 0.65
			NOT = {
				any_owned_province = {
					NOT = { culture_group = root }
					is_state_core = root
					base_tax = 4
					NOT = { has_building = town_hall }
					OR = {
						AND = {
							NOT = { has_building = courthouse }
							num_free_building_slots = 1
						}
						AND = {
							ROOT = { adm_tech = 36 }
							has_building = courthouse
						}
					}
				}
			}
		}
		modifier = {
			factor = 1.2
			any_owned_province = {
				NOT = { culture_group = root }
				is_state_core = root
				base_tax = 7
				NOT = { has_building = town_hall }
				OR = {
					AND = {
						NOT = { has_building = courthouse }
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { adm_tech = 36 }
						has_building = courthouse
					}
				}
			}
		}
		modifier = {
			factor = 2
			NOT = {
				crown_land_share = 15
			}
		}
	}
	pre_effect = {
		set_variable = {
			which = estate_church_build_temple_in_y_var
			value = 0
		}
		random_owned_province = {
			limit = {
				NOT = { culture_group = root }
				is_state_core = root
				NOT = { has_building = town_hall }
				OR = {
					AND = {
						NOT = { has_building = courthouse }
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { adm_tech = 36 }
						has_building = courthouse
					}
				}
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				NOT = { culture_group = root }
				is_state_core = root
				base_tax = 4
				NOT = { has_building = town_hall }
				OR = {
					AND = {
						NOT = { has_building = courthouse }
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { adm_tech = 36 }
						has_building = courthouse
					}
				}
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				NOT = { culture_group = root }
				is_state_core = root
				base_tax = 7
				NOT = { has_building = town_hall }
				OR = {
					AND = {
						NOT = { has_building = courthouse }
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { adm_tech = 36 }
						has_building = courthouse
					}
				}
			}
			save_event_target_as = agenda_province
		}
		event_target:agenda_province = {
			if = {
				limit = {
					NOT = { has_building = courthouse }
				}
				ROOT = {
					set_variable = {
						which = estate_town_hall_build_temple_in_y_var
						value = 1
					}
				}
			}
			else = {
				ROOT = {
					set_variable = {
						which = estate_town_hall_build_temple_in_y_var
						value = 2
					}
				}
			}
		}
	}
	fail_if = {
		event_target:agenda_province = {
			OR = {
				culture_group = root
				NOT = { owned_by = root }
			}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
    task_requirements = {
		if = {
			limit = {
				check_variable = {
					which = estate_town_hall_build_temple_in_y_var
					value = 2
				}
			}
			event_target:agenda_province = {
				has_building = town_hall
			}
		}
		else = {
			event_target:agenda_province = {
				has_courthouse_building_trigger = yes
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = me_estate_cultural_minorities
			loyalty = 10
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = me_estate_cultural_minorities
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = me_estate_cultural_minorities }
		}
		else = {
			event_target:agenda_province = {
				add_base_tax = 1
			}
		}
    }
    failing_effect = {
		event_target:agenda_province = {
			if = {
				limit = { owned_by = root }
				add_named_unrest = {
					name = local_culture_displeased
					value = 5
				}
			}
		}
		add_estate_loyalty_modifier = {
			estate = me_estate_cultural_minorities
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
		}
    }
}

#estate_berbers_agendas
estate_berbers_build_tax_building = { #"errors culture_group =" are false positive
	can_select = {
		any_owned_province = {
			is_state_core = root
			culture_group = berber_group
			NOT = { has_building = cathedral }
			OR = {
				AND = {
					NOT = { has_building = temple }
					num_free_building_slots = 1
				}
				AND = {
					ROOT = { adm_tech = 36 }
					OR = {
						has_building = temple
						num_free_building_slots = 1
					}
				}
			}
		}
		ROOT = { mil_tech = 21 }
	}
	selection_weight = {
		factor = 1
		modifier = {
			factor = 0.65
			NOT = {
				any_owned_province = {
					is_state_core = root
					culture_group = berber_group
					base_tax = 4
					NOT = { has_building = cathedral }
					OR = {
						AND = {
							NOT = { has_building = temple }
							num_free_building_slots = 1
						}
						AND = {
							ROOT = { adm_tech = 36 }
							OR = {
								has_building = temple
								num_free_building_slots = 1
							}
						}
					}
				}
			}
		}
		modifier = {
			factor = 2
			NOT = {
				crown_land_share = 15
			}
		}
	}
	pre_effect = {
		set_country_flag = estate_berbers_recent_agenda
		set_variable = {
			which = estate_burghers_build_production_building_in_y_var
			value = 0
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				culture_group = berber_group
				NOT = { has_building = cathedral }
				OR = {
					AND = {
						NOT = { has_building = temple }
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { adm_tech = 36 }
						OR = {
							has_building = temple
							num_free_building_slots = 1
						}
					}
				}
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				culture_group = berber_group
				base_tax = 4
				NOT = { has_building = cathedral }
				OR = {
					AND = {
						NOT = { has_building = temple }
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { adm_tech = 36 }
						OR = {
							has_building = temple
							num_free_building_slots = 1
						}
					}
				}
			}
			save_event_target_as = agenda_province
		}
		event_target:agenda_province = {
			if = {
				limit = {
					has_building = temple
				}
				ROOT = {
					set_variable = {
						which = estate_berbers_build_tax_building_in_y_var
						value = 2
					}
				}
			}
			else = {
				ROOT = {
					set_variable = {
						which = estate_berbers_build_tax_building_in_y_var
						value = 1
					}
				}
			}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
	task_requirements = {
		if = {
			limit = {
				check_variable = {
					which = estate_berbers_build_tax_building_in_y_var
					value = 2
				}
			}
			event_target:agenda_province = {
				has_building = cathedral
			}
		}
		else = {
			event_target:agenda_province = {
				has_tax_building_trigger = yes
			}
		}
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_berbers
			loyalty = 10
		}
		event_target:agenda_province = {
			add_base_tax = 1
		}
	}
	failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_berbers
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
		}
	}
}

estate_berbers_accept_culture = {
	can_select = {
		NOT = { 
			OR = { 
				accepted_culture = tuareg
                accepted_culture = shilha
                accepted_culture = zayane
		    	accepted_culture = riffian
		    	accepted_culture = ait_atta
		    	accepted_culture = guanche
		    	accepted_culture = kabylian
		    	accepted_culture = shawiya
		    	accepted_culture = shenwa
		    	accepted_culture = mozabite
		    	accepted_culture = lamtuna
		    	accepted_culture = libyan_berber_culture
		    	accepted_culture = siwa_culture
		    }
		}
		development_in_provinces = {
			is_state_core = root
			culture_group = berber_group
			value = 20
		}
		
		NOT = { 
			OR = { #closeby diwan countries
				has_reform = ME_caliphate_reform_sunni 
				has_reform = ME_caliphate_reform_sunni_andalusia 
				has_reform = ME_caliphate_reform_sunni_arabian 
				has_reform = ME_caliphate_reform_shia_ibadi
			}
		}
	}
	selection_weight = {
		factor = 3 #very likely, please keep your berber culture accepted!
		modifier = {
			factor = 5
			development_in_provinces = {
				is_state_core = root
				culture_group = berber_group
				value = 50
			}
		}
	}
	pre_effect = {
		set_country_flag = estate_berbers_recent_agenda
	}
	provinces_to_highlight = {
		owned_by = ROOT
		culture_group = berber_group
	}
	fail_if = {
		NOT = {
			development_in_provinces = {
				is_state_core = root
				culture_group = berber_group
				value = 20
			}
		}
	}
	task_requirements = {
		OR = {
		    accepted_culture = tuareg
            accepted_culture = shilha
            accepted_culture = zayane
			accepted_culture = riffian
			accepted_culture = ait_atta
			accepted_culture = guanche
			accepted_culture = kabylian
			accepted_culture = shawiya
			accepted_culture = shenwa
			accepted_culture = mozabite
			accepted_culture = lamtuna
			accepted_culture = libyan_berber_culture
			accepted_culture = siwa_culture
		}
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_berbers
			loyalty = 10
		}
		add_dip_power = 25
	}
	failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_berbers
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
		}
	}
}

estate_berbers_develop = {
	can_select = {
		any_owned_province = {
			is_state_core = ROOT
			culture_group = berber_group
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		set_country_flag = estate_berbers_recent_agenda
		random_owned_province = {
			limit = {
				is_state_core = ROOT
				culture_group = berber_group
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = ROOT
				culture_group = berber_group
				NOT = { development = 20 }
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = ROOT
				culture_group = berber_group
				NOT = { development = 15 }
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = ROOT
				culture_group = berber_group
				NOT = { development = 10 }
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = ROOT
				culture_group = berber_group
				NOT = { development = 7 }
			}
			save_event_target_as = agenda_province
		}
		event_target:agenda_province = {
			if = {
				limit = {
					check_variable = {
						which = province_dev_var
						value = 1
					}
				}
				set_variable = {
					which = province_dev_var
					value = 0
				}
			}
			export_to_variable = {
				which = province_dev_var
				value = trigger_value:base_tax
			}
			change_variable = {
				which = province_dev_var
				value = 2
			}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
	task_requirements = {
		event_target:agenda_province = {
			base_tax = "province_dev_var"
		}
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_berbers
			loyalty = 10
		}
		add_years_of_income = 0.25
	}
	failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_berbers
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
		}
	}
}

estate_berbers_expand_tribal_land = {
	can_select = {
		always = yes
	}
	selection_weight = {
		factor = 1
		
		modifier = {
			factor = 0.001
			NOT = {
				any_owned_province = {
					is_state_core = ROOT
					culture_group = berber_group
					any_neighbor_province = {
						owned_by = ROOT
						NOT = { culture_group = berber_group }
					}
				}
			}
		}
	}
	pre_effect = {
		set_country_flag = estate_berbers_recent_agenda
		random_owned_province = {
			limit = {
				is_state_core = ROOT
				culture_group = berber_group
				any_neighbor_province = {
					owned_by = ROOT
					NOT = { culture_group = berber_group }
				}
			}
			random_neighbor_province = {
				limit = {
					owned_by = ROOT
					NOT = { culture_group = berber_group }
				}
				save_event_target_as = agenda_province
			}
		}
		random_owned_province = {
			limit = {
				is_state_core = ROOT
				culture_group = berber_group
				any_neighbor_province = {
					owned_by = ROOT
					NOT = { culture_group = berber_group }
				}
			}
			random_neighbor_province = {
				limit = {
					owned_by = ROOT
					NOT = { culture_group = berber_group }
					NOT = { development = 20 }
				}
				save_event_target_as = agenda_province
			}
		}
		random_owned_province = {
			limit = {
				is_state_core = ROOT
				culture_group = berber_group
				any_neighbor_province = {
					owned_by = ROOT
					NOT = { culture_group = berber_group }
				}
			}
			random_neighbor_province = {
				limit = {
					owned_by = ROOT
					NOT = { culture_group = berber_group }
					NOT = { development = 15 }
				}
				save_event_target_as = agenda_province
			}
		}
		random_owned_province = {
			limit = {
				is_state_core = ROOT
				culture_group = berber_group
				any_neighbor_province = {
					owned_by = ROOT
					NOT = { culture_group = berber_group }
				}
			}
			random_neighbor_province = {
				limit = {
					owned_by = ROOT
					NOT = { culture_group = berber_group }
					NOT = { development = 10 }
				}
				save_event_target_as = agenda_province
			}
		}
		random_owned_province = {
			limit = {
				is_state_core = ROOT
				culture_group = berber_group
				any_neighbor_province = {
					owned_by = ROOT
					NOT = { culture_group = berber_group }
				}
			}
			random_neighbor_province = {
				limit = {
					owned_by = ROOT
					NOT = { culture_group = berber_group }
					NOT = { development = 7 }
				}
				save_event_target_as = agenda_province
			}
		}
		event_target:agenda_province = {
			if = {
				limit = {
					check_variable = {
						which = province_dev_var
						value = 1
					}
				}
				set_variable = {
					which = province_dev_var
					value = 0
				}
			}
			export_to_variable = {
				which = province_dev_var
				value = trigger_value:base_tax
			}
			change_variable = {
				which = province_dev_var
				value = 3
			}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
	task_requirements = {
		event_target:agenda_province = {
			base_tax = "province_dev_var"
		}
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_berbers
			loyalty = 15
		}
		event_target:agenda_province = {
			random_list = {
			    1 = {
				    trigger = { owner = { accepted_culture = tuareg } }
					change_culture = tuareg
				}
				1 = {
				    trigger = { owner = { accepted_culture = shilha } }
					change_culture = shilha
				}
				1 = {
				    trigger = { owner = { accepted_culture = zayane } }
					change_culture = zayane
				}
				1 = {
				    trigger = { owner = { accepted_culture = riffian } }
					change_culture = riffian
				}
				1 = {
				    trigger = { owner = { accepted_culture = ait_atta } }
					change_culture = ait_atta
				}
				1 = {
				    trigger = { owner = { accepted_culture = guanche } }
					change_culture = guanche
				}
				1 = {
				    trigger = { owner = { accepted_culture = kabylian } }
					change_culture = kabylian
				}
				1 = {
				    trigger = { owner = { accepted_culture = shawiya } }
					change_culture = shawiya
				}
				1 = {
				    trigger = { owner = { accepted_culture = shenwa } }
					change_culture = shenwa
				}
				1 = {
				    trigger = { owner = { accepted_culture = mozabite } }
					change_culture = mozabite
				}
				1 = {
				    trigger = { owner = { accepted_culture = lamtuna } }
					change_culture = lamtuna
				}
				1 = {
				    trigger = { owner = { accepted_culture = libyan_berber_culture } }
					change_culture = libyan_berber_culture
				}
				1 = {
				    trigger = { owner = { accepted_culture = siwa_culture } }
					change_culture = siwa_culture
				}
			}
		}
	}
	failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_berbers
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
		}
	}
}

estate_berbers_build_manpower_building = {
	can_select = {
		any_owned_province = {
			is_state_core = root
			culture_group = berber_group
			NOT = { has_building = training_fields  }
			OR = {
				AND = {
					NOT = { has_building = barracks }
					num_free_building_slots = 1
				}
				AND = {
					ROOT = { mil_tech = 33 }
					OR = {
						has_building = barracks
						num_free_building_slots = 1
					}
				}
			}
		}
		ROOT = { mil_tech = 23 }
	}
	selection_weight = {
		factor = 1
		modifier = {
			factor = 0.65
			NOT = {
				any_owned_province = {
					is_state_core = root
					culture_group = berber_group
					base_manpower = 4
					NOT = { has_building = training_fields  }
					OR = {
						AND = {
							NOT = { has_building = barracks }
							num_free_building_slots = 1
						}
						AND = {
							ROOT = { mil_tech = 33 }
							OR = {
								has_building = barracks
								num_free_building_slots = 1
							}
						}
					}
				}
			}
		}
		modifier = {
			factor = 2
			NOT = {
				crown_land_share = 15
			}
		}
	}
	pre_effect = {
		set_country_flag = estate_berbers_recent_agenda
		set_variable = {
			which = estate_burghers_build_production_building_in_y_var
			value = 0
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				culture_group = berber_group
				NOT = { has_building = training_fields  }
				OR = {
					AND = {
						NOT = { has_building = barracks }
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { mil_tech = 33 }
						OR = {
							has_building = barracks
							num_free_building_slots = 1
						}
					}
				}
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				culture_group = berber_group
				base_manpower = 4
				NOT = { has_building = training_fields  }
				OR = {
					AND = {
						NOT = { has_building = barracks }
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { mil_tech = 33 }
						OR = {
							has_building = barracks
							num_free_building_slots = 1
						}
					}
				}
			}
			save_event_target_as = agenda_province
		}
		event_target:agenda_province = {
			if = {
				limit = {
					has_building = barracks
				}
				ROOT = {
					set_variable = {
						which = estate_berbers_build_manpower_building_in_y_var
						value = 2
					}
				}
			}
			else = {
				ROOT = {
					set_variable = {
						which = estate_berbers_build_manpower_building_in_y_var
						value = 1
					}
				}
			}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
	task_requirements = {
		if = {
			limit = {
				check_variable = {
					which = estate_berbers_build_manpower_building_in_y_var
					value = 2
				}
			}
			event_target:agenda_province = {
				has_building = training_fields
			}
		}
		else = {
			event_target:agenda_province = {
				has_manpower_building_trigger = yes
			}
		}
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_berbers
			loyalty = 10
		}
		event_target:agenda_province = {
			add_base_manpower = 1
		}
	}
	failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_berbers
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
		}
	}
}

estate_berbers_increase_autonomy = {
	can_select = {
		any_owned_province = {
			is_state_core = root
			NOT = { local_autonomy = 75 }
			culture_group = berber_group
			is_capital = no
			NOT = { has_province_modifier = autonomy_increased }
			NOT = { has_province_modifier = autonomy_decreased }
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		set_country_flag = estate_berbers_recent_agenda
		set_variable = {
			which = estate_dhimmi_increase_autonomy_in_province_x_var
			value = 0
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				NOT = { local_autonomy = 75 }
				culture_group = berber_group
				is_capital = no
				NOT = { has_province_modifier = autonomy_increased }
				NOT = { has_province_modifier = autonomy_decreased }
			}
			save_event_target_as = agenda_province
		}
		event_target:agenda_province = {
			if = {
				limit = {
					local_autonomy = 60
				}
				root = {
					set_variable = {
						which = estate_dhimmi_increase_autonomy_in_province_x_var
						value = 5
					}
				}
			}
			else_if = {
				limit = {
					local_autonomy = 45
				}
				root = {
					set_variable = {
						which = estate_dhimmi_increase_autonomy_in_province_x_var
						value = 4
					}
				}
			}
			else_if = {
				limit = {
					local_autonomy = 30
				}
				root = {
					set_variable = {
						which = estate_dhimmi_increase_autonomy_in_province_x_var
						value = 3
					}
				}
			}
			else_if = {
				limit = {
					local_autonomy = 15
				}
				root = {
					set_variable = {
						which = estate_dhimmi_increase_autonomy_in_province_x_var
						value = 2
					}
				}
			}
			else = {
				root = {
					set_variable = {
						which = estate_dhimmi_increase_autonomy_in_province_x_var
						value = 1
					}
				}
			}
		}
	}
	on_invalid = {
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		OR = {
			event_target:agenda_province = {
				NOT = { owned_by = root }
			}
			custom_trigger_tooltip = {
				tooltip = estate_dhimmi_increase_autonomy_in_province_x_tooltip
				hidden_trigger = {
					if = {
						limit = {
							check_variable = {
								which = estate_dhimmi_increase_autonomy_in_province_x_var
								value = 5
							}
						}
						event_target:agenda_province = {
							NOT = { local_autonomy = 50 }
						}
					}
					else_if = {
						limit = {
							check_variable = {
								which = estate_dhimmi_increase_autonomy_in_province_x_var
								value = 4
							}
						}
						event_target:agenda_province = {
							NOT = { local_autonomy = 35 }
						}
					}
					else_if = {
						limit = {
							check_variable = {
								which = estate_dhimmi_increase_autonomy_in_province_x_var
								value = 3
							}
						}
						event_target:agenda_province = {
							NOT = { local_autonomy = 20 }
						}
					}
					else_if = {
						limit = {
							check_variable = {
								which = estate_dhimmi_increase_autonomy_in_province_x_var
								value = 2
							}
						}
						event_target:agenda_province = {
							NOT = { local_autonomy = 5 }
						}
					}
					else = {
						hidden_trigger = {
							always = no
						}
					}
				}
			}	
		}
	}
	task_requirements = {
		if = {
			limit = {
				check_variable = {
					which = estate_dhimmi_increase_autonomy_in_province_x_var
					value = 5
				}
			}
			event_target:agenda_province = {
				local_autonomy = 75
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = estate_dhimmi_increase_autonomy_in_province_x_var
					value = 4
				}
			}
			event_target:agenda_province = {
				local_autonomy = 60
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = estate_dhimmi_increase_autonomy_in_province_x_var
					value = 3
				}
			}
			event_target:agenda_province = {
				local_autonomy = 45
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = estate_dhimmi_increase_autonomy_in_province_x_var
					value = 2
				}
			}
			event_target:agenda_province = {
				local_autonomy = 30
			}
		}
		else = {
			event_target:agenda_province = {
				local_autonomy = 15
			}
		}
	}
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_berbers
			loyalty = 15
		}
    }
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_berbers
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }
    }
}

#08_vu_polish_magnates_agendas
estate_magnates_hire_advisor = {
	can_select = {
		NOT = {
			employed_advisor = {
				category = ADM
			}
		}
	}
	selection_weight = {
		factor = 1
	}
	task_requirements = {
		employed_advisor = {
			category = ADM
		}
		is_in_deficit = no
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_magnates
			loyalty = 10
		}
	}
	failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_magnates
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
		}
	}
}

estate_magnates_lower_recruitment = {
	can_select = {
		army_size_percentage = 0.8
	}
	selection_weight = {
		factor = 1
	}
	task_requirements = {
		NOT = {
			army_size_percentage = 0.7
		}
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_magnates
			loyalty = 10
		}
	}
	failing_effect = {
		add_estate_loyalty_modifier = {
			estate = estate_magnates
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
		}
	}
}

#000_subjects_expanded_estate_agendas
## Replacing agendas for compatibility
## cannot vassalize custom subjects, hardcoded to tributaries
#estate_nobles_vassalise_vulnerable_country = {
#	can_select = {
#		is_free_or_tributary_trigger = yes
#		is_at_war = no
#		num_of_cities = 12
#		any_neighbor_country = {
#			NOT = { has_reform = free_city }
#			OR = {
#				is_subject = no
#				is_subject_of_type = tributary_state
#			}
#			OR = {
#				NOT = { num_of_cities = 4 }
#				NOT = { total_development = 100 }
#			}
#			OR = {
#				NOT = { num_of_cities = 3 }
#				NOT = { total_development = 50 }
#				ROOT = { total_development = 500 }
#			}
#			NOT = { is_subject_of = root }
#			NOT = { overlord_of = root }
#			NOT = { alliance_with = root }
#			NOT = { ROOT = { truce_with = prev } }
#			NOT = {
#				has_opinion = {
#					who = root
#					value = 100
#				}
#			}
#			OR = {
#				is_part_of_hre = no
#				NOT = { hre_reform_passed = landfriede }
#				ROOT = { is_part_of_hre = no }
#			}
#			any_owned_province = {
#				NOT = { is_claim = root }
#				NOT = { is_core = root }
#			}
#		}
#		NOT = { has_country_modifier = foreign_contacts }
#	}
#	selection_weight = {
#		factor = 2
#		modifier = {
#			factor = 0.5
#			has_non_generic_missions = yes
#		}
#		modifier = {
#			factor = 1.5
#			num_of_cities = 20
#		}
#		modifier = {
#			factor = 1.5
#			num_of_cities = 25
#		}
#		modifier = {
#			factor = 1.5
#			num_of_cities = 30
#		}
#		modifier = {
#			factor = 1.5
#			num_of_cities = 40
#		}
#		modifier = {
#			factor = 1.5
#			num_of_cities = 50
#		}
#		modifier = {
#			factor = 0.25
#			any_country = {
#				coalition_target = root
#			}
#		}
#	}
#	pre_effect = {
#		random_neighbor_country = {
#			limit = {
#				NOT = { has_reform = free_city }
#				OR = {
#					is_subject = no
#					is_subject_of_type = tributary_state
#				}
#				OR = {
#					NOT = { num_of_cities = 4 }
#					NOT = { total_development = 100 }
#				}
#				OR = {
#					NOT = { num_of_cities = 3 }
#					NOT = { total_development = 50 }
#					ROOT = { total_development = 500 }
#				}
#				NOT = { is_subject_of = root }
#				NOT = { overlord_of = root }
#				NOT = { alliance_with = root }
#				NOT = { ROOT = { truce_with = prev } }
#				NOT = {
#					has_opinion = {
#						who = root
#						value = 100
#					}
#				}
#				OR = {
#					is_part_of_hre = no
#					NOT = { hre_reform_passed = landfriede }
#					ROOT = { is_part_of_hre = no }
#				}
#				any_owned_province = {
#					NOT = { is_claim = root }
#					NOT = { is_core = root }
#				}
#			}
#			save_event_target_as = agenda_country
#			capital_scope = {
#				save_event_target_as = agenda_province
#			}
#		}
#	}
#	immediate_effect = {
#		add_casus_belli = {
#			type = cb_vassalize_mission
#			months = 240
#			target = event_target:agenda_country
#		}
#	}
#	on_invalid = {
#		if = {
#			limit = {
#				has_casus_belli = {
#					type = cb_vassalize_mission
#					target = event_target:agenda_country
#				}
#			}
#			remove_casus_belli = {
#				type = cb_vassalize_mission
#				target = event_target:agenda_country
#			}
#		}
#	}
#	provinces_to_highlight = {
#		is_capital_of = event_target:agenda_country
#	}
#	task_requirements = {
#		event_target:agenda_country = {
#			is_subject_of = root
#			NOT = { is_subject_of_type = tributary_state }
#		}
#	}
#	fail_if = {
#		OR = {
#			AND = {
#				is_subject = yes
#				NOT = { is_subject_of = ROOT }
#				NOT = { is_subject_of_type = tributary_state }
#			}
#			event_target:agenda_country = {
#				NOT = { num_of_cities = 1 }
#			}
#		}
#	}
#	task_completed_effect = {
#		add_estate_loyalty = {
#			estate = estate_nobles
#			loyalty = 10
#		}
#		add_country_modifier = {
#			name = foreign_contacts
#			duration = 3650
#		}
#		hidden_effect = {
#			remove_casus_belli = {
#				type = cb_vassalize_mission
#				target = event_target:agenda_country
#			}
#		}
#	}
#    failing_effect = {
#        add_estate_loyalty_modifier = {
#            estate = estate_nobles
#			desc = EST_VAL_AGENDA_DENIED
#			loyalty = -5
#			duration = 7300
#		}
#		if = {
#			limit = {
#				has_casus_belli = {
#					type = cb_vassalize_mission
#					target = event_target:agenda_country
#				}
#			}
#			remove_casus_belli = {
#				type = cb_vassalize_mission
#				target = event_target:agenda_country
#			}
#		}
#    }
#}
#
#estate_rajput_vassalise_vulnerable_country = {
#	can_select = {
#		is_free_or_tributary_trigger = yes
#		is_at_war = no
#		num_of_cities = 12
#		any_neighbor_country = {
#			NOT = { has_reform = free_city }
#			OR = {
#				is_subject = no
#				is_subject_of_type = tributary_state
#			}
#			OR = {
#				NOT = { num_of_cities = 4 }
#				NOT = { total_development = 100 }
#			}
#			OR = {
#				NOT = { num_of_cities = 3 }
#				NOT = { total_development = 50 }
#				ROOT = { total_development = 500 }
#			}
#			NOT = { is_subject_of = root }
#			NOT = { overlord_of = root }
#			NOT = { alliance_with = root }
#			NOT = { ROOT = { truce_with = prev } }
#			NOT = {
#				has_opinion = {
#					who = root
#					value = 100
#				}
#			}
#			OR = {
#				is_part_of_hre = no
#				NOT = { hre_reform_passed = landfriede }
#				ROOT = { is_part_of_hre = no }
#			}
#			any_owned_province = {
#				NOT = { is_claim = root }
#				NOT = { is_core = root }
#			}
#		}
#		NOT = { has_country_modifier = foreign_contacts }
#	}
#	selection_weight = {
#		factor = 2
#		modifier = {
#			factor = 0.5
#			has_non_generic_missions = yes
#		}
#		modifier = {
#			factor = 1.5
#			num_of_cities = 20
#		}
#		modifier = {
#			factor = 1.5
#			num_of_cities = 25
#		}
#		modifier = {
#			factor = 1.5
#			num_of_cities = 30
#		}
#		modifier = {
#			factor = 1.5
#			num_of_cities = 40
#		}
#		modifier = {
#			factor = 1.5
#			num_of_cities = 50
#		}
#		modifier = {
#			factor = 0.25
#			any_country = {
#				coalition_target = root
#			}
#		}
#	}
#	pre_effect = {
#		random_neighbor_country = {
#			limit = {
#				NOT = { has_reform = free_city }
#				OR = {
#					is_subject = no
#					is_subject_of_type = tributary_state
#				}
#				OR = {
#					NOT = { num_of_cities = 4 }
#					NOT = { total_development = 100 }
#				}
#				OR = {
#					NOT = { num_of_cities = 3 }
#					NOT = { total_development = 50 }
#					ROOT = { total_development = 500 }
#				}
#				NOT = { is_subject_of = root }
#				NOT = { overlord_of = root }
#				NOT = { alliance_with = root }
#				NOT = { ROOT = { truce_with = prev } }
#				NOT = {
#					has_opinion = {
#						who = root
#						value = 100
#					}
#				}
#				OR = {
#					is_part_of_hre = no
#					NOT = { hre_reform_passed = landfriede }
#					ROOT = { is_part_of_hre = no }
#				}
#				any_owned_province = {
#					NOT = { is_claim = root }
#					NOT = { is_core = root }
#				}
#			}
#			save_event_target_as = agenda_country
#			capital_scope = {
#				save_event_target_as = agenda_province
#			}
#		}
#	}
#	immediate_effect = {
#		add_casus_belli = {
#			type = cb_vassalize_mission
#			months = 240
#			target = event_target:agenda_country
#		}
#	}
#	on_invalid = {
#		if = {
#			limit = {
#				has_casus_belli = {
#					type = cb_vassalize_mission
#					target = event_target:agenda_country
#				}
#			}
#			remove_casus_belli = {
#				type = cb_vassalize_mission
#				target = event_target:agenda_country
#			}
#		}
#	}
#	provinces_to_highlight = {
#		is_capital_of = event_target:agenda_country
#	}
#	task_requirements = {
#		event_target:agenda_country = {
#			is_subject_of = root
#			NOT = { is_subject_of_type = tributary_state }
#		}
#	}
#	fail_if = {
#		OR = {
#			AND = {
#				is_subject = yes
#				NOT = { is_subject_of = ROOT }
#				NOT = { is_subject_of_type = tributary_state }
#			}
#			event_target:agenda_country = {
#				NOT = { num_of_cities = 1 }
#			}
#		}
#	}
#	task_completed_effect = {
#		add_estate_loyalty = {
#			estate = estate_rajput
#			loyalty = 10
#		}
#		add_country_modifier = {
#			name = foreign_contacts
#			duration = 3650
#		}
#		hidden_effect = {
#			remove_casus_belli = {
#				type = cb_vassalize_mission
#				target = event_target:agenda_country
#			}
#		}
#	}
#    failing_effect = {
#        add_estate_loyalty_modifier = {
#            estate = estate_rajput
#			desc = EST_VAL_AGENDA_DENIED
#			loyalty = -5
#			duration = 7300
#		}
#		if = {
#			limit = {
#				has_casus_belli = {
#					type = cb_vassalize_mission
#					target = event_target:agenda_country
#				}
#			}
#			remove_casus_belli = {
#				type = cb_vassalize_mission
#				target = event_target:agenda_country
#			}
#		}
#    }
#}
#
#estate_maratha_vassalise_vulnerable_country = {
#	can_select = {
#		is_free_or_tributary_trigger = yes
#		is_at_war = no
#		num_of_cities = 12
#		any_neighbor_country = {
#			NOT = { has_reform = free_city }
#			OR = {
#				is_subject = no
#				is_subject_of_type = tributary_state
#			}
#			OR = {
#				NOT = { num_of_cities = 4 }
#				NOT = { total_development = 100 }
#			}
#			OR = {
#				NOT = { num_of_cities = 3 }
#				NOT = { total_development = 50 }
#				ROOT = { total_development = 500 }
#			}
#			NOT = { is_subject_of = root }
#			NOT = { overlord_of = root }
#			NOT = { alliance_with = root }
#			NOT = { ROOT = { truce_with = prev } }
#			NOT = {
#				has_opinion = {
#					who = root
#					value = 100
#				}
#			}
#			OR = {
#				is_part_of_hre = no
#				NOT = { hre_reform_passed = landfriede }
#				ROOT = { is_part_of_hre = no }
#			}
#			any_owned_province = {
#				NOT = { is_claim = root }
#				NOT = { is_core = root }
#			}
#		}
#		NOT = { has_country_modifier = foreign_contacts }
#	}
#	selection_weight = {
#		factor = 2
#		modifier = {
#			factor = 0.5
#			has_non_generic_missions = yes
#		}
#		modifier = {
#			factor = 1.5
#			num_of_cities = 20
#		}
#		modifier = {
#			factor = 1.5
#			num_of_cities = 25
#		}
#		modifier = {
#			factor = 1.5
#			num_of_cities = 30
#		}
#		modifier = {
#			factor = 1.5
#			num_of_cities = 40
#		}
#		modifier = {
#			factor = 1.5
#			num_of_cities = 50
#		}
#		modifier = {
#			factor = 0.25
#			any_country = {
#				coalition_target = root
#			}
#		}
#	}
#	pre_effect = {
#		random_neighbor_country = {
#			limit = {
#				NOT = { has_reform = free_city }
#				OR = {
#					is_subject = no
#					is_subject_of_type = tributary_state
#				}
#				OR = {
#					NOT = { num_of_cities = 4 }
#					NOT = { total_development = 100 }
#				}
#				OR = {
#					NOT = { num_of_cities = 3 }
#					NOT = { total_development = 50 }
#					ROOT = { total_development = 500 }
#				}
#				NOT = { is_subject_of = root }
#				NOT = { overlord_of = root }
#				NOT = { alliance_with = root }
#				NOT = { ROOT = { truce_with = prev } }
#				NOT = {
#					has_opinion = {
#						who = root
#						value = 100
#					}
#				}
#				OR = {
#					is_part_of_hre = no
#					NOT = { hre_reform_passed = landfriede }
#					ROOT = { is_part_of_hre = no }
#				}
#				any_owned_province = {
#					NOT = { is_claim = root }
#					NOT = { is_core = root }
#				}
#			}
#			save_event_target_as = agenda_country
#			capital_scope = {
#				save_event_target_as = agenda_province
#			}
#		}
#	}
#	immediate_effect = {
#		add_casus_belli = {
#			type = cb_vassalize_mission
#			months = 240
#			target = event_target:agenda_country
#		}
#	}
#	on_invalid = {
#		if = {
#			limit = {
#				has_casus_belli = {
#					type = cb_vassalize_mission
#					target = event_target:agenda_country
#				}
#			}
#			remove_casus_belli = {
#				type = cb_vassalize_mission
#				target = event_target:agenda_country
#			}
#		}
#	}
#	provinces_to_highlight = {
#		is_capital_of = event_target:agenda_country
#	}
#	task_requirements = {
#		event_target:agenda_country = {
#			is_subject_of = root
#			NOT = { is_subject_of_type = tributary_state }
#		}
#	}
#	fail_if = {
#		OR = {
#			AND = {
#				is_subject = yes
#				NOT = { is_subject_of = ROOT }
#				NOT = { is_subject_of_type = tributary_state }
#			}
#			event_target:agenda_country = {
#				NOT = { num_of_cities = 1 }
#			}
#		}
#	}
#	task_completed_effect = {
#		add_estate_loyalty = {
#			estate = estate_maratha
#			loyalty = 10
#		}
#		add_country_modifier = {
#			name = foreign_contacts
#			duration = 3650
#		}
#		hidden_effect = {
#			remove_casus_belli = {
#				type = cb_vassalize_mission
#				target = event_target:agenda_country
#			}
#		}
#	}
#    failing_effect = {
#        add_estate_loyalty_modifier = {
#            estate = estate_maratha
#			desc = EST_VAL_AGENDA_DENIED
#			loyalty = -5
#			duration = 7300
#		}
#		if = {
#			limit = {
#				has_casus_belli = {
#					type = cb_vassalize_mission
#					target = event_target:agenda_country
#				}
#			}
#			remove_casus_belli = {
#				type = cb_vassalize_mission
#				target = event_target:agenda_country
#			}
#		}
#    }
#}
#
#estate_nomadic_tribes_vassalise_vulnerable_country = {
#	can_select = {
#		is_free_or_tributary_trigger = yes
#		is_at_war = no
#		num_of_cities = 12
#		any_neighbor_country = {
#			NOT = { has_reform = free_city }
#			OR = {
#				is_subject = no
#				is_subject_of_type = tributary_state
#			}
#			OR = {
#				NOT = { num_of_cities = 4 }
#				NOT = { total_development = 100 }
#			}
#			OR = {
#				NOT = { num_of_cities = 3 }
#				NOT = { total_development = 50 }
#				ROOT = { total_development = 500 }
#			}
#			NOT = { is_subject_of = root }
#			NOT = { overlord_of = root }
#			NOT = { alliance_with = root }
#			NOT = { ROOT = { truce_with = prev } }
#			NOT = {
#				has_opinion = {
#					who = root
#					value = 100
#				}
#			}
#			OR = {
#				is_part_of_hre = no
#				NOT = { hre_reform_passed = landfriede }
#				ROOT = { is_part_of_hre = no }
#			}
#			any_owned_province = {
#				NOT = { is_claim = root }
#				NOT = { is_core = root }
#			}
#		}
#		NOT = { has_country_modifier = foreign_contacts }
#	}
#	selection_weight = {
#		factor = 2
#		modifier = {
#			factor = 0.5
#			has_non_generic_missions = yes
#		}
#		modifier = {
#			factor = 1.5
#			num_of_cities = 20
#		}
#		modifier = {
#			factor = 1.5
#			num_of_cities = 25
#		}
#		modifier = {
#			factor = 1.5
#			num_of_cities = 30
#		}
#		modifier = {
#			factor = 1.5
#			num_of_cities = 40
#		}
#		modifier = {
#			factor = 1.5
#			num_of_cities = 50
#		}
#		modifier = {
#			factor = 0.25
#			any_country = {
#				coalition_target = root
#			}
#		}
#	}
#	pre_effect = {
#		random_neighbor_country = {
#			limit = {
#				NOT = { has_reform = free_city }
#				OR = {
#					is_subject = no
#					is_subject_of_type = tributary_state
#				}
#				OR = {
#					NOT = { num_of_cities = 4 }
#					NOT = { total_development = 100 }
#				}
#				OR = {
#					NOT = { num_of_cities = 3 }
#					NOT = { total_development = 50 }
#					ROOT = { total_development = 500 }
#				}
#				NOT = { is_subject_of = root }
#				NOT = { overlord_of = root }
#				NOT = { alliance_with = root }
#				NOT = { ROOT = { truce_with = prev } }
#				NOT = {
#					has_opinion = {
#						who = root
#						value = 100
#					}
#				}
#				OR = {
#					is_part_of_hre = no
#					NOT = { hre_reform_passed = landfriede }
#					ROOT = { is_part_of_hre = no }
#				}
#				any_owned_province = {
#					NOT = { is_claim = root }
#					NOT = { is_core = root }
#				}
#			}
#			save_event_target_as = agenda_country
#			capital_scope = {
#				save_event_target_as = agenda_province
#			}
#		}
#	}
#	immediate_effect = {
#		add_casus_belli = {
#			type = cb_vassalize_mission
#			months = 240
#			target = event_target:agenda_country
#		}
#	}
#	on_invalid = {
#		if = {
#			limit = {
#				has_casus_belli = {
#					type = cb_vassalize_mission
#					target = event_target:agenda_country
#				}
#			}
#			remove_casus_belli = {
#				type = cb_vassalize_mission
#				target = event_target:agenda_country
#			}
#		}
#	}
#	provinces_to_highlight = {
#		is_capital_of = event_target:agenda_country
#	}
#	task_requirements = {
#		event_target:agenda_country = {
#			is_subject_of = root
#			NOT = { is_subject_of_type = tributary_state }
#		}
#	}
#	fail_if = {
#		OR = {
#			AND = {
#				is_subject = yes
#				NOT = { is_subject_of = ROOT }
#				NOT = { is_subject_of_type = tributary_state }
#			}
#			event_target:agenda_country = {
#				NOT = { num_of_cities = 1 }
#			}
#		}
#	}
#	task_completed_effect = {
#		add_estate_loyalty = {
#			estate = estate_nomadic_tribes
#			loyalty = 10
#		}
#		add_country_modifier = {
#			name = foreign_contacts
#			duration = 3650
#		}
#		hidden_effect = {
#			remove_casus_belli = {
#				type = cb_vassalize_mission
#				target = event_target:agenda_country
#			}
#		}
#	}
#    failing_effect = {
#        add_estate_loyalty_modifier = {
#            estate = estate_nomadic_tribes
#			desc = EST_VAL_AGENDA_DENIED
#			loyalty = -5
#			duration = 7300
#		}
#		if = {
#			limit = {
#				has_casus_belli = {
#					type = cb_vassalize_mission
#					target = event_target:agenda_country
#				}
#			}
#			remove_casus_belli = {
#				type = cb_vassalize_mission
#				target = event_target:agenda_country
#			}
#		}
#    }
#}